import{j as r,B as N,T as g,b as Te,G as Vi,I as Sr,u as Mr,d as xe,C as qr,e as Qi,f as $i,g as jt,V as qe,W as Ji,h as $t,L as Ye,i as T,H as Me,k as Xe,l as Ar,m as Er,n as W,o as Ir,p as st,M as Yi,q as Xi,r as Zi,s as es,t as ts,F as ee,v as ns,w as an,x as ln,y as K,z as te,O as Re,A as Cr,D as Ze,E as et,J as tt,K as nt,N as cn,P as Or,Q as zr,R as un,S as dn,U as hn,X as rt,Y as Rr,Z as rs,$ as Lr,a0 as Tr,a1 as Mt,a2 as ce,a3 as qt,a4 as ue,a5 as Dr,a6 as is,a7 as ss,a8 as os,a9 as Hr,aa as as,ab as ls,ac as cs}from"./chakra-4f3b0c56.js";import{a as us,u as fn,e as mn,f as ds,h as Pr,i as hs,r as se,j as fs,k as ms,l as ps,P as ys,b as gs}from"./reacts-f889ea02.js";import{G as X,U as xs,E as bs,I as Fr}from"./icons-a4b7f741.js";import{n as ge,o as ws,S as St,d as js,p as vs,a as _s,b as ks}from"./utility-d12ed75c.js";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))h(p);new MutationObserver(p=>{for(const i of p)if(i.type==="childList")for(const b of i.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&h(b)}).observe(document,{childList:!0,subtree:!0});function c(p){const i={};return p.integrity&&(i.integrity=p.integrity),p.referrerPolicy&&(i.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?i.credentials="include":p.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function h(p){if(p.ep)return;p.ep=!0;const i=c(p);fetch(p.href,i)}})();var tn={},dr=us;tn.createRoot=dr.createRoot,tn.hydrateRoot=dr.hydrateRoot;function Kr(o){return X({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}}]})(o)}function Nr(o){return X({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}}]})(o)}function Ss(o){return X({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}}]})(o)}function Ms(o){return X({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 00.12-.61l-1.92-3.32a.488.488 0 00-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 00-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 00-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"}}]})(o)}function Br(o){return X({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M12.65 10A5.99 5.99 0 007 6c-3.31 0-6 2.69-6 6s2.69 6 6 6a5.99 5.99 0 005.65-4H17v4h4v-4h2v-4H12.65zM7 14c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"}}]})(o)}function Ur(o){return X({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}}]})(o)}function Wr(o){return X({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"}}]})(o)}function pn(o){return X({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"}}]})(o)}function qs(o){return X({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}}]})(o)}function As(o){return X({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M14 12c0-1.1-.9-2-2-2s-2 .9-2 2 .9 2 2 2 2-.9 2-2zm-2-9a9 9 0 00-9 9H0l4 4 4-4H5c0-3.87 3.13-7 7-7s7 3.13 7 7a6.995 6.995 0 01-11.06 5.7l-1.42 1.44A9 9 0 1012 3z"}}]})(o)}const ot=fn,Es=mn;var Gr=(o=>(o.UNSUPPORTED_FILE="UNSUPPORTED_FILE",o.UNKNOWN="UNKNOWN",o))(Gr||{});class Is{constructor(l){this.worker=l,l.addEventListener("message",this.eventHandler)}idPromiseMap=new Map;eventHandler=l=>{const{id:c,result:h,error:p}=l.data,i=this.idPromiseMap.get(c);if(!i){console.error("cound not fetch worker promise for action: %s",c);return}this.idPromiseMap.delete(c);const[b,w]=i;if(p){const j=new Error(p.message,{cause:p});j.stack=p.stack,Object.assign(j,{code:p.code??null}),w(j)}else b(h)};async request(l,c){return new Promise((h,p)=>{const i=`request://${l}/${ge()}`;this.idPromiseMap.set(i,[h,p]),this.worker.postMessage({id:i,action:l,payload:c})})}}var yn=(o=>(o.DECRYPT="DECRYPT",o.VERSION="VERSION",o))(yn||{});const Cs=typeof setImmediate<"u"?setImmediate:typeof requestAnimationFrame<"u"?requestAnimationFrame:setTimeout;async function Os(){return new Promise(o=>Cs(o))}class zs{constructor(l=5){this.maxConcurrent=l}items=[];async add(l,c){return new Promise((h,p)=>{this.items.push([l,h,p,c]),this.runWorkerIfFree()})}runWorkerIfFree(){this.maxConcurrent>0&&(this.maxConcurrent--,this.processQueue().catch(l=>{console.error("process queue with error, continue.",l)}).finally(()=>{this.maxConcurrent++}))}async processQueue(){let l;for(;l=this.items.shift();){const[c,h,p,i]=l;try{i?.(),h(await this.handler(c))}catch(b){p(b)}finally{await Os()}}}}class Rs extends zs{constructor(l,c){super(c),this.workerClientBus=l}async handler(l){return this.workerClientBus.request(yn.DECRYPT,l)}}const Vr=new Worker(new URL(""+new URL("worker-650750a2.js",import.meta.url).href,self.location),{type:"module"});Vr.addEventListener("error",console.error);const Qr=new Is(Vr),Ls=new Rs(Qr),Ts=new TextEncoder,Ds=new TextDecoder("utf-8");function hr(o){return Ts.encode(o)}function nn(o){return Ds.decode(o)}function Hs(o){const l=o.byteLength;for(let c=0;c<l;c++)if(o[c]===0)return c;return l}function Ps(o){const l=o.buffer.slice(o.byteOffset,o.byteOffset+16);if(nn(l)!=="yeelion-kuwo-tme")return null;const c=new Uint8Array(o.buffer.slice(o.byteOffset+48,o.byteOffset+64)),h=Hs(c),p=nn(c.slice(0,h));return{encVersion:o.getUint32(16,!0),rid:o.getUint32(24,!0).toString(),quality:p}}function fr(o,l){if(o===l)return 0;if(o.length===0)return l.length;if(l.length===0)return o.length;const c=hr(o.normalize().toLowerCase()),h=hr(l.normalize().toLowerCase()),p=c.byteLength,i=h.byteLength;let b=new Uint32Array(i+1),w=new Uint32Array(i+1);for(let j=0;j<=i;j++)b[j]=j;for(let j=0;j<p;j++){w[0]=j+1;for(let O=0;O<i;O++){const A=b[O+1]+1,E=w[O]+1,L=b[O]+(c[j]===h[O]?0:1);w[O+1]=Math.min(A,E,L)}[b,w]=[w,b]}return b[i]}function Fs(o,l){const c=l.length;if(c===0)throw new Error("empty candidates");let h=0,p=fr(o,l[0]);for(let i=1;i<c;i++){const b=fr(o,l[i]);b<p&&(p=b,h=i)}return l[h]}function*mr(o){if(o&&typeof o=="object")for(const l in o)yield[l,o[l]]}const{hasOwn:$r}=Object;function pr(o,l){const c=[];for(const[h,p]of Object.entries(o)){const i=l(h,p);i&&c.push(i)}return c}function yr(o,l,c){return ws(o,l,c)}const Ks=o=>o.name.normalize(),Ns=o=>o.ekey.trim(),Bs=(o,l)=>({id:ge(),name:o.normalize(),ekey:l.trim()}),Jr=o=>{const l=o.match(/^(\d+)-(\w+)$/);if(!l)return null;const[c,h,p]=l;return{rid:h,quality:p}},Yr=o=>`${o.rid}-${o.quality}`,Us=o=>o.ekey,Ws=(o,l)=>{if(typeof l!="string")return null;const c=Jr(o);return c?{id:ge(),rid:c.rid,quality:c.quality,ekey:l}:null},Gs=o=>o.settings.staging.qmc2,Vs=o=>o.settings.production.qmc2,Qs=o=>o.settings.staging.kwm2.keys,$s=o=>o.settings.production.kwm2.keys,Js=(o,l)=>{const c=l.normalize();let h;const{keys:p,allowFuzzyNameSearch:i}=Vs(o);if($r(p,c))h=p[c];else if(i){const b=Object.keys(p);if(b.length>0){const w=Fs(c,b);console.debug("qmc2: key db could not find %o, using closest %o instead.",c,w),h=p[w]}}return h},Ys=(o,l)=>{const c=Ps(l);if(!c)return;const h=$s(o),p=Yr({id:"",ekey:"",quality:c.quality,rid:c.rid});let i;return $r(h,p)&&(i=h[p]),i};var rn=(o=>(o.QUEUED="QUEUED",o.PROCESSING="PROCESSING",o.COMPLETE="COMPLETE",o.ERROR="ERROR",o))(rn||{});const Xs={files:Object.create(null),displayMode:"LIST"},sn=ds("fileListing/processFile",async({fileId:o},l)=>{const c=l.getState(),h=Zr(c)[o];if(!h){const{message:w,stack:j}=new Error("ERROR: File not found");return l.rejectWithValue({message:w,stack:j})}const p=()=>{l.dispatch(eo({id:o}))},i=await fetch(h.raw,{headers:{Range:"bytes=0-1023"}}).then(w=>w.blob()).then(w=>w.arrayBuffer()),b={qmc2Key:Js(c,h.fileName),kwm2key:Ys(c,new DataView(i))};return Ls.add({id:o,blobURI:h.raw,options:b},p)}),Xr=Pr({name:"fileListing",initialState:Xs,reducers:{addNewFile:(o,{payload:l})=>{o.files[l.id]={fileName:l.fileName,raw:l.blobURI,decrypted:"",ext:"",state:"QUEUED",errorMessage:null,errorCode:null,metadata:null}},setDecryptedContent:(o,{payload:l})=>{const c=o.files[l.id];c&&(c.decrypted=l.decryptedBlobURI)},setFileAsProcessing:(o,{payload:l})=>{const c=o.files[l.id];c&&(c.state="PROCESSING")},deleteFile:(o,{payload:l})=>{if(o.files[l.id]){const c=o.files[l.id];c.decrypted&&URL.revokeObjectURL(c.decrypted),c.raw&&URL.revokeObjectURL(c.raw),delete o.files[l.id]}}},extraReducers(o){o.addCase(sn.fulfilled,(l,c)=>{const{fileId:h}=c.meta.arg,p=l.files[h];p&&(p.state="COMPLETE",p.decrypted=c.payload.decrypted,p.ext=c.payload.ext)}),o.addCase(sn.rejected,(l,c)=>{const{fileId:h}=c.meta.arg,p=l.files[h];p&&(p.errorMessage=c.error.message??"unknown error",p.errorCode=c.error.code??null,p.state="ERROR")})}}),{addNewFile:Zs,setFileAsProcessing:eo,setDecryptedContent:xa,deleteFile:to}=Xr.actions,Zr=o=>o.fileListing.files,no=Xr.reducer;function ei({children:o,onReceiveFiles:l}){const{getRootProps:c,getInputProps:h,isDragActive:p}=hs({multiple:!0,onDropAccepted:l});return r.jsxs(N,{...c(),w:"100%",maxW:480,borderWidth:"1px",borderRadius:"lg",transitionDuration:"0.5s",p:"6",cursor:"pointer",display:"flex",flexDir:"column",alignItems:"center",_hover:{borderColor:"gray.400",bg:"gray.50"},...p&&{bg:"blue.50",borderColor:"blue.700"},children:[r.jsx("input",{...h()}),o]})}function ro(){const o=ot(),l=c=>{console.debug("react-dropzone/onDropAccepted(%o, %o)",c.length,c.map(h=>h.name));for(const h of c){const p=URL.createObjectURL(h),i=h.name,b="file://"+ge();o(Zs({id:b,blobURI:p,fileName:i})),o(sn({fileId:b}))}};return r.jsxs(ei,{multiple:!0,onReceiveFiles:l,children:[r.jsx(N,{pb:3,children:r.jsx(xs,{boxSize:8})}),r.jsxs(g,{as:"div",textAlign:"center",children:["拖放或",r.jsx(g,{as:"span",color:"teal.400",children:"点我选择"}),"需要解密的文件",r.jsx(g,{fontSize:"sm",opacity:"50%",children:"在浏览器内对文件进行解锁，零上传"})]})]})}const io=Te(Vi,{baseStyle:{gridTemplateAreas:{base:`
        "cover"
        "title"
        "meta"
        "action"
      `,md:`
        "cover title action"
        "cover meta  action"
      `},gridTemplateRows:{base:"repeat(auto-fill)",md:"min-content 1fr"},gridTemplateColumns:{base:"1fr",md:"160px 1fr"},gap:3}}),so=""+new URL("no-cover-81648e65.svg",import.meta.url).href;function oo({name:o,url:l}){const c=o?`${o} 的专辑封面`:"专辑封面";return r.jsx(N,{w:"160px",h:"160px",m:"auto",children:r.jsx(Sr,{border:"2px solid",borderColor:"gray.400",borderRadius:"50%",objectFit:"cover",src:l||so,alt:c})})}function ao({metadata:o}){return r.jsxs(N,{children:[r.jsxs(g,{children:["专辑: ",r.jsx("span",{"data-testid":"audio-meta-album-name",children:o.album})]}),r.jsxs(g,{children:["艺术家: ",r.jsx("span",{"data-testid":"audio-meta-song-artist",children:o.artist})]}),r.jsxs(g,{children:["专辑艺术家: ",r.jsx("span",{"data-testid":"audio-meta-album-artist",children:o.albumArtist})]})]})}const lo=new Map([[Gr.UNSUPPORTED_FILE,"尚未支持的文件格式"]]);function co({error:o,code:l}){const{isOpen:c,onToggle:h}=Mr(),p=lo.get(l)??"未知错误";return r.jsxs(N,{children:[r.jsxs(g,{children:[r.jsxs(Te.span,{children:["解密错误：",r.jsx(Te.span,{color:"red.700",children:p})]}),o&&r.jsx(xe,{ml:"2",onClick:h,type:"button",children:"详细"})]}),o&&r.jsx(qr,{in:c,animateOpacity:!0,children:r.jsx(N,{as:"pre",display:"inline-block",mt:"2",px:"4",py:"2",bg:"red.100",color:"red.800",rounded:"md",children:o})})]})}function uo({id:o,file:l}){const{isOpen:c,onClose:h}=Mr({defaultIsOpen:!0}),p=ot(),i=l.state===rn.COMPLETE,b=l.metadata,w=l.fileName.replace(/\.[a-z\d]{3,6}$/,""),j=w+"."+l.ext,O=se.useRef(null),A=()=>{const L=O.current;L&&(L.paused?L.play():L.pause())},E=L=>{L==="exit"&&p(to({id:o}))};return r.jsx(qr,{in:c,animateOpacity:!0,unmountOnExit:!0,startingHeight:0,onAnimationComplete:E,style:{width:"100%",padding:"0.25rem"},children:r.jsx(Qi,{w:"full","data-testid":"file-row",children:r.jsx($i,{children:r.jsxs(io,{children:[r.jsx(jt,{area:"cover",children:r.jsx(oo,{name:b?.album,url:b?.cover})}),r.jsx(jt,{area:"title",children:r.jsx(N,{w:"full",as:"h4",fontWeight:"semibold",mt:"1",textAlign:{base:"center",md:"left"},children:r.jsx("span",{"data-testid":"audio-meta-song-name",children:b?.name??w})})}),r.jsxs(jt,{area:"meta",children:[i&&b&&r.jsx(ao,{metadata:b}),l.state===rn.ERROR&&r.jsx(co,{error:l.errorMessage,code:l.errorCode})]}),r.jsx(jt,{area:"action",alignSelf:"center",children:r.jsxs(qe,{children:[l.decrypted&&r.jsx("audio",{controls:!0,autoPlay:!1,src:l.decrypted,ref:O}),r.jsxs(Ji,{children:[i&&r.jsxs(r.Fragment,{children:[r.jsx($t,{children:r.jsx(xe,{type:"button",onClick:A,children:"播放/暂停"})}),r.jsx($t,{children:l.decrypted&&r.jsx(Ye,{isExternal:!0,href:l.decrypted,download:j,children:r.jsx(xe,{as:"span",children:"下载"})})})]}),r.jsx($t,{children:r.jsx(xe,{type:"button",onClick:h,children:"删除"})})]})]})})]})})})})}function ho(){const o=Es(Zr);return r.jsx(qe,{children:Object.entries(o).map(([l,c])=>r.jsx(uo,{id:l,file:c},l))})}function fo(){return r.jsx(N,{h:"full",w:"full",pt:"4",children:r.jsxs(qe,{gap:"3",children:[r.jsx(ro,{}),r.jsx(N,{w:"full",children:r.jsx(ho,{})})]})})}const gr={staging:{qmc2:{allowFuzzyNameSearch:!1,keys:[]},kwm2:{keys:[]}},production:{qmc2:{allowFuzzyNameSearch:!1,keys:{}},kwm2:{keys:{}}}},mo=o=>({qmc2:{keys:yr(o.qmc2.keys,Ks,Ns),allowFuzzyNameSearch:o.qmc2.allowFuzzyNameSearch},kwm2:{keys:yr(o.kwm2.keys,Yr,Us)}}),Jt=o=>({qmc2:{keys:pr(o.qmc2.keys,Bs),allowFuzzyNameSearch:o.qmc2.allowFuzzyNameSearch},kwm2:{keys:pr(o.kwm2.keys,Ws)}}),gn=Pr({name:"settings",initialState:gr,reducers:{setProductionChanges:(o,{payload:l})=>({production:l,staging:Jt(l)}),qmc2AddKey(o){o.staging.qmc2.keys.push({id:ge(),name:"",ekey:""})},qmc2ImportKeys(o,{payload:l}){const c=l.map(h=>({id:ge(),...h}));o.staging.qmc2.keys.push(...c)},qmc2DeleteKey(o,{payload:{id:l}}){const c=o.staging.qmc2;c.keys=c.keys.filter(h=>h.id!==l)},qmc2UpdateKey(o,{payload:{id:l,field:c,value:h}}){const p=o.staging.qmc2.keys.find(i=>i.id===l);p&&(p[c]=h)},qmc2ClearKeys(o){o.staging.qmc2.keys=[]},qmc2AllowFuzzyNameSearch(o,{payload:{enable:l}}){o.staging.qmc2.allowFuzzyNameSearch=l},kwm2AddKey(o){o.staging.kwm2.keys.push({id:ge(),ekey:"",quality:"",rid:""})},kwm2ImportKeys(o,{payload:l}){const c=l.map(h=>({id:ge(),...h}));o.staging.kwm2.keys.push(...c)},kwm2DeleteKey(o,{payload:{id:l}}){const c=o.staging.kwm2;c.keys=c.keys.filter(h=>h.id!==l)},kwm2UpdateKey(o,{payload:{id:l,field:c,value:h}}){const p=o.staging.kwm2.keys.find(i=>i.id===l);p&&(p[c]=h)},kwm2ClearKeys(o){o.staging.kwm2.keys=[]},discardStagingChanges:o=>{o.staging=Jt(o.production)},commitStagingChange:o=>{const l=mo(o.staging);return{staging:Jt(l),production:l}},resetConfig:()=>gr}}),{setProductionChanges:po,resetConfig:ba,qmc2AddKey:yo,qmc2UpdateKey:go,qmc2DeleteKey:xo,qmc2ClearKeys:bo,qmc2ImportKeys:wo,qmc2AllowFuzzyNameSearch:jo,kwm2AddKey:vo,kwm2UpdateKey:_o,kwm2DeleteKey:ko,kwm2ClearKeys:So,kwm2ImportKeys:Mo,commitStagingChange:qo,discardStagingChanges:Ao}=gn.actions,Eo=gn.reducer,Io=se.memo(({id:o,name:l,ekey:c,i:h})=>{const p=ot(),i=(w,j)=>p(go({id:o,field:w,value:j.target.value})),b=()=>p(xo({id:o}));return r.jsx(T,{mt:0,pt:2,pb:2,_even:{bg:"gray.50"},children:r.jsxs(Me,{children:[r.jsx(g,{w:"2em",textAlign:"center",children:h+1}),r.jsxs(qe,{flex:1,children:[r.jsx(Xe,{variant:"flushed",placeholder:"文件名",value:l,onChange:w=>i("name",w)}),r.jsxs(Ar,{size:"xs",children:[r.jsx(Er,{pr:"2",children:r.jsx(W,{as:Br})}),r.jsx(Xe,{variant:"flushed",placeholder:"密钥",value:c,onChange:w=>i("ekey",w)}),r.jsx(Ir,{children:r.jsx(g,{pl:"2",color:c.length?"green.500":"red.500",children:r.jsx("code",{children:c.length||"?"})})})]})]}),r.jsx(st,{"aria-label":"删除该密钥",icon:r.jsx(W,{as:Nr,boxSize:6}),variant:"ghost",colorScheme:"red",type:"button",onClick:b})]})})});function ti({clientName:o,children:l,show:c,onClose:h,onImport:p}){const i=b=>p(b[0]);return r.jsxs(Yi,{isOpen:c,onClose:h,closeOnOverlayClick:!1,scrollBehavior:"inside",size:"xl",children:[r.jsx(Xi,{}),r.jsxs(Zi,{children:[r.jsx(es,{children:"导入密钥数据库"}),r.jsx(ts,{}),r.jsxs(ee,{as:ns,gap:2,flexDir:"column",flex:1,children:[r.jsx(an,{children:r.jsx(ei,{onReceiveFiles:i,children:"拖放或点我选择含有密钥的数据库文件"})}),r.jsxs(g,{mt:2,children:["选择你的",o&&r.jsxs(r.Fragment,{children:["「",o,"」"]}),"客户端平台以查看对应说明："]}),r.jsx(ee,{as:ln,variant:"enclosed",flexDir:"column",flex:1,minH:0,children:l})]})]})]})}function ni(o){return o.replace(/.*[\\/]/,"")}var vt=void 0,Je=function(o){return vt||(vt=new Promise(function(l,c){var h=typeof o<"u"?o:{},p=h.onAbort;h.onAbort=function(e){c(new Error(e)),p&&p(e)},h.postRun=h.postRun||[],h.postRun.push(function(){l(h)}),Le=void 0;var i;i||(i=typeof h<"u"?h:{}),i.onRuntimeInitialized=function(){function e(u,y){switch(typeof y){case"boolean":Ui(u,y?1:0);break;case"number":Ki(u,y);break;case"string":Ni(u,y,-1,-1);break;case"object":if(y===null)cr(u);else if(y.length!=null){var x=Qt(y);Bi(u,x,y.length,-1),xt(x)}else wt(u,"Wrong API use : tried to return a value of an unknown type ("+y+").",-1);break;default:cr(u)}}function t(u,y){for(var x=[],v=0;v<u;v+=1){var q=oe(y+4*v,"i32"),z=Ti(q);if(z===1||z===2)q=Fi(q);else if(z===3)q=Hi(q);else if(z===4){z=q,q=Di(z),z=Pi(z);for(var ie=new Uint8Array(q),V=0;V<q;V+=1)ie[V]=B[z+V];q=ie}else q=null;x.push(q)}return x}function n(u,y){this.La=u,this.db=y,this.Ja=1,this.fb=[]}function s(u,y){if(this.db=y,y=Ie(u)+1,this.Ya=gt(y),this.Ya===null)throw Error("Unable to allocate memory for the SQL string");je(u,ne,this.Ya,y),this.eb=this.Ya,this.Ua=this.ib=null}function a(u){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),u!=null){var y=this.filename,x="/",v=y;if(x&&(x=typeof x=="string"?x:Ke(x),v=y?ae(x+"/"+y):x),y=Jn(!0,!0),v=ut(v,(y!==void 0?y:438)&4095|32768,0),u){if(typeof u=="string"){x=Array(u.length);for(var q=0,z=u.length;q<z;++q)x[q]=u.charCodeAt(q);u=x}ht(v,y|146),x=Oe(v,577),Vn(x,u,0,u.length,0),Ft(x),ht(v,y)}}this.handleError(k(this.filename,d)),this.db=oe(d,"i32"),Wi(this.db),this.Za={},this.Na={}}var d=ye(4),f=i.cwrap,k=f("sqlite3_open","number",["string","number"]),C=f("sqlite3_close_v2","number",["number"]),I=f("sqlite3_exec","number",["number","string","number","number","number"]),F=f("sqlite3_changes","number",["number"]),le=f("sqlite3_prepare_v2","number",["number","string","number","number","number"]),ir=f("sqlite3_sql","string",["number"]),bi=f("sqlite3_normalized_sql","string",["number"]),sr=f("sqlite3_prepare_v2","number",["number","number","number","number","number"]),wi=f("sqlite3_bind_text","number",["number","number","number","number","number"]),or=f("sqlite3_bind_blob","number",["number","number","number","number","number"]),ji=f("sqlite3_bind_double","number",["number","number","number"]),vi=f("sqlite3_bind_int","number",["number","number","number"]),_i=f("sqlite3_bind_parameter_index","number",["number","string"]),ki=f("sqlite3_step","number",["number"]),Si=f("sqlite3_errmsg","string",["number"]),Mi=f("sqlite3_column_count","number",["number"]),qi=f("sqlite3_data_count","number",["number"]),Ai=f("sqlite3_column_double","number",["number","number"]),ar=f("sqlite3_column_text","string",["number","number"]),Ei=f("sqlite3_column_blob","number",["number","number"]),Ii=f("sqlite3_column_bytes","number",["number","number"]),Ci=f("sqlite3_column_type","number",["number","number"]),Oi=f("sqlite3_column_name","string",["number","number"]),zi=f("sqlite3_reset","number",["number"]),Ri=f("sqlite3_clear_bindings","number",["number"]),Li=f("sqlite3_finalize","number",["number"]),lr=f("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),Ti=f("sqlite3_value_type","number",["number"]),Di=f("sqlite3_value_bytes","number",["number"]),Hi=f("sqlite3_value_text","string",["number"]),Pi=f("sqlite3_value_blob","number",["number"]),Fi=f("sqlite3_value_double","number",["number"]),Ki=f("sqlite3_result_double","",["number","number"]),cr=f("sqlite3_result_null","",["number"]),Ni=f("sqlite3_result_text","",["number","string","number","number"]),Bi=f("sqlite3_result_blob","",["number","number","number","number"]),Ui=f("sqlite3_result_int","",["number","number"]),wt=f("sqlite3_result_error","",["number","string","number"]),ur=f("sqlite3_aggregate_context","number",["number","number"]),Wi=f("RegisterExtensionFunctions","number",["number"]);n.prototype.bind=function(u){if(!this.La)throw"Statement closed";return this.reset(),Array.isArray(u)?this.xb(u):u!=null&&typeof u=="object"?this.yb(u):!0},n.prototype.step=function(){if(!this.La)throw"Statement closed";this.Ja=1;var u=ki(this.La);switch(u){case 100:return!0;case 101:return!1;default:throw this.db.handleError(u)}},n.prototype.sb=function(u){return u==null&&(u=this.Ja,this.Ja+=1),Ai(this.La,u)},n.prototype.Cb=function(u){if(u==null&&(u=this.Ja,this.Ja+=1),u=ar(this.La,u),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(u)},n.prototype.Db=function(u){return u==null&&(u=this.Ja,this.Ja+=1),ar(this.La,u)},n.prototype.getBlob=function(u){u==null&&(u=this.Ja,this.Ja+=1);var y=Ii(this.La,u);u=Ei(this.La,u);for(var x=new Uint8Array(y),v=0;v<y;v+=1)x[v]=B[u+v];return x},n.prototype.get=function(u,y){y=y||{},u!=null&&this.bind(u)&&this.step(),u=[];for(var x=qi(this.La),v=0;v<x;v+=1)switch(Ci(this.La,v)){case 1:var q=y.useBigInt?this.Cb(v):this.sb(v);u.push(q);break;case 2:u.push(this.sb(v));break;case 3:u.push(this.Db(v));break;case 4:u.push(this.getBlob(v));break;default:u.push(null)}return u},n.prototype.getColumnNames=function(){for(var u=[],y=Mi(this.La),x=0;x<y;x+=1)u.push(Oi(this.La,x));return u},n.prototype.getAsObject=function(u,y){u=this.get(u,y),y=this.getColumnNames();for(var x={},v=0;v<y.length;v+=1)x[y[v]]=u[v];return x},n.prototype.getSQL=function(){return ir(this.La)},n.prototype.getNormalizedSQL=function(){return bi(this.La)},n.prototype.run=function(u){return u!=null&&this.bind(u),this.step(),this.reset()},n.prototype.nb=function(u,y){y==null&&(y=this.Ja,this.Ja+=1),u=An(u);var x=Qt(u);this.fb.push(x),this.db.handleError(wi(this.La,y,x,u.length-1,0))},n.prototype.wb=function(u,y){y==null&&(y=this.Ja,this.Ja+=1);var x=Qt(u);this.fb.push(x),this.db.handleError(or(this.La,y,x,u.length,0))},n.prototype.mb=function(u,y){y==null&&(y=this.Ja,this.Ja+=1),this.db.handleError((u===(u|0)?vi:ji)(this.La,y,u))},n.prototype.zb=function(u){u==null&&(u=this.Ja,this.Ja+=1),or(this.La,u,0,0,0)},n.prototype.ob=function(u,y){switch(y==null&&(y=this.Ja,this.Ja+=1),typeof u){case"string":this.nb(u,y);return;case"number":this.mb(u,y);return;case"bigint":this.nb(u.toString(),y);return;case"boolean":this.mb(u+0,y);return;case"object":if(u===null){this.zb(y);return}if(u.length!=null){this.wb(u,y);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+u+")."},n.prototype.yb=function(u){var y=this;return Object.keys(u).forEach(function(x){var v=_i(y.La,x);v!==0&&y.ob(u[x],v)}),!0},n.prototype.xb=function(u){for(var y=0;y<u.length;y+=1)this.ob(u[y],y+1);return!0},n.prototype.reset=function(){return this.freemem(),Ri(this.La)===0&&zi(this.La)===0},n.prototype.freemem=function(){for(var u;(u=this.fb.pop())!==void 0;)xt(u)},n.prototype.free=function(){this.freemem();var u=Li(this.La)===0;return delete this.db.Za[this.La],this.La=0,u},s.prototype.next=function(){if(this.Ya===null)return{done:!0};if(this.Ua!==null&&(this.Ua.free(),this.Ua=null),!this.db.db)throw this.gb(),Error("Database closed");var u=Ge(),y=ye(4);Fe(d),Fe(y);try{this.db.handleError(sr(this.db.db,this.eb,-1,d,y)),this.eb=oe(y,"i32");var x=oe(d,"i32");return x===0?(this.gb(),{done:!0}):(this.Ua=new n(x,this.db),this.db.Za[x]=this.Ua,{value:this.Ua,done:!1})}catch(v){throw this.ib=U(this.eb),this.gb(),v}finally{Ve(u)}},s.prototype.gb=function(){xt(this.Ya),this.Ya=null},s.prototype.getRemainingSQL=function(){return this.ib!==null?this.ib:U(this.eb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(s.prototype[Symbol.iterator]=function(){return this}),a.prototype.run=function(u,y){if(!this.db)throw"Database closed";if(y){u=this.prepare(u,y);try{u.step()}finally{u.free()}}else this.handleError(I(this.db,u,0,0,d));return this},a.prototype.exec=function(u,y,x){if(!this.db)throw"Database closed";var v=Ge(),q=null;try{var z=Ie(u)+1,ie=ye(z);je(u,B,ie,z);var V=ie,J=ye(4);for(u=[];oe(V,"i8")!==0;){Fe(d),Fe(J),this.handleError(sr(this.db,V,-1,d,J));var Y=oe(d,"i32");if(V=oe(J,"i32"),Y!==0){for(z=null,q=new n(Y,this),y!=null&&q.bind(y);q.step();)z===null&&(z={columns:q.getColumnNames(),values:[]},u.push(z)),z.values.push(q.get(null,x));q.free()}}return u}catch(Qe){throw q&&q.free(),Qe}finally{Ve(v)}},a.prototype.each=function(u,y,x,v,q){typeof y=="function"&&(v=x,x=y,y=void 0),u=this.prepare(u,y);try{for(;u.step();)x(u.getAsObject(null,q))}finally{u.free()}if(typeof v=="function")return v()},a.prototype.prepare=function(u,y){if(Fe(d),this.handleError(le(this.db,u,-1,d,0)),u=oe(d,"i32"),u===0)throw"Nothing to prepare";var x=new n(u,this);return y!=null&&x.bind(y),this.Za[u]=x},a.prototype.iterateStatements=function(u){return new s(u,this)},a.prototype.export=function(){Object.values(this.Za).forEach(function(y){y.free()}),Object.values(this.Na).forEach(We),this.Na={},this.handleError(C(this.db));var u=pi(this.filename);return this.handleError(k(this.filename,d)),this.db=oe(d,"i32"),u},a.prototype.close=function(){this.db!==null&&(Object.values(this.Za).forEach(function(u){u.free()}),Object.values(this.Na).forEach(We),this.Na={},this.handleError(C(this.db)),Kn("/"+this.filename),this.db=null)},a.prototype.handleError=function(u){if(u===0)return null;throw u=Si(this.db),Error(u)},a.prototype.getRowsModified=function(){return F(this.db)},a.prototype.create_function=function(u,y){Object.prototype.hasOwnProperty.call(this.Na,u)&&(We(this.Na[u]),delete this.Na[u]);var x=Vt(function(v,q,z){q=t(q,z);try{var ie=y.apply(null,q)}catch(V){wt(v,V,-1);return}e(v,ie)},"viii");return this.Na[u]=x,this.handleError(lr(this.db,u,y.length,1,0,x,0,0,0)),this},a.prototype.create_aggregate=function(u,y){var x=y.init||function(){return null},v=y.finalize||function(J){return J},q=y.step;if(!q)throw"An aggregate function must have a step function in "+u;var z={};Object.hasOwnProperty.call(this.Na,u)&&(We(this.Na[u]),delete this.Na[u]),y=u+"__finalize",Object.hasOwnProperty.call(this.Na,y)&&(We(this.Na[y]),delete this.Na[y]);var ie=Vt(function(J,Y,Qe){var Se=ur(J,1);Object.hasOwnProperty.call(z,Se)||(z[Se]=x()),Y=t(Y,Qe),Y=[z[Se]].concat(Y);try{z[Se]=q.apply(null,Y)}catch(Gi){delete z[Se],wt(J,Gi,-1)}},"viii"),V=Vt(function(J){var Y=ur(J,1);try{var Qe=v(z[Y])}catch(Se){delete z[Y],wt(J,Se,-1);return}e(J,Qe),delete z[Y]},"vi");return this.Na[u]=ie,this.Na[y]=V,this.handleError(lr(this.db,u,q.length-1,1,0,0,ie,V,0)),this},i.Database=a};var b=Object.assign({},i),w="./this.program",j=typeof window=="object",O=typeof importScripts=="function",A=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",E="",L,Q,be,Ae,Ee,At;A?(E=O?require("path").dirname(E)+"/":__dirname+"/",At=()=>{Ee||(Ae=require("fs"),Ee=require("path"))},L=function(e,t){return At(),e=Ee.normalize(e),Ae.readFileSync(e,t?void 0:"utf8")},be=e=>(e=L(e,!0),e.buffer||(e=new Uint8Array(e)),e),Q=(e,t,n)=>{At(),e=Ee.normalize(e),Ae.readFile(e,function(s,a){s?n(s):t(a.buffer)})},1<process.argv.length&&(w=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),typeof Le<"u"&&(Le.exports=i),i.inspect=function(){return"[Emscripten Module object]"}):(j||O)&&(O?E=self.location.href:typeof document<"u"&&document.currentScript&&(E=document.currentScript.src),E=E.indexOf("blob:")!==0?E.substr(0,E.replace(/[?#].*/,"").lastIndexOf("/")+1):"",L=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},O&&(be=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),Q=(e,t,n)=>{var s=new XMLHttpRequest;s.open("GET",e,!0),s.responseType="arraybuffer",s.onload=()=>{s.status==200||s.status==0&&s.response?t(s.response):n()},s.onerror=n,s.send(null)});var xn=i.print||console.log.bind(console),we=i.printErr||console.warn.bind(console);Object.assign(i,b),b=null,i.thisProgram&&(w=i.thisProgram);var De;i.wasmBinary&&(De=i.wasmBinary),i.noExitRuntime,typeof WebAssembly!="object"&&he("no native wasm support detected");var Et,bn=!1,wn=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function He(e,t,n){var s=t+n;for(n=t;e[n]&&!(n>=s);)++n;if(16<n-t&&e.buffer&&wn)return wn.decode(e.subarray(t,n));for(s="";t<n;){var a=e[t++];if(a&128){var d=e[t++]&63;if((a&224)==192)s+=String.fromCharCode((a&31)<<6|d);else{var f=e[t++]&63;a=(a&240)==224?(a&15)<<12|d<<6|f:(a&7)<<18|d<<12|f<<6|e[t++]&63,65536>a?s+=String.fromCharCode(a):(a-=65536,s+=String.fromCharCode(55296|a>>10,56320|a&1023))}}else s+=String.fromCharCode(a)}return s}function U(e,t){return e?He(ne,e,t):""}function je(e,t,n,s){if(!(0<s))return 0;var a=n;s=n+s-1;for(var d=0;d<e.length;++d){var f=e.charCodeAt(d);if(55296<=f&&57343>=f){var k=e.charCodeAt(++d);f=65536+((f&1023)<<10)|k&1023}if(127>=f){if(n>=s)break;t[n++]=f}else{if(2047>=f){if(n+1>=s)break;t[n++]=192|f>>6}else{if(65535>=f){if(n+2>=s)break;t[n++]=224|f>>12}else{if(n+3>=s)break;t[n++]=240|f>>18,t[n++]=128|f>>12&63}t[n++]=128|f>>6&63}t[n++]=128|f&63}}return t[n]=0,n-a}function Ie(e){for(var t=0,n=0;n<e.length;++n){var s=e.charCodeAt(n);127>=s?t++:2047>=s?t+=2:55296<=s&&57343>=s?(t+=4,++n):t+=3}return t}var It,B,ne,at,_,H,Ct,Ot;function jn(){var e=Et.buffer;It=e,i.HEAP8=B=new Int8Array(e),i.HEAP16=at=new Int16Array(e),i.HEAP32=_=new Int32Array(e),i.HEAPU8=ne=new Uint8Array(e),i.HEAPU16=new Uint16Array(e),i.HEAPU32=H=new Uint32Array(e),i.HEAPF32=Ct=new Float32Array(e),i.HEAPF64=Ot=new Float64Array(e)}var de,vn=[],_n=[],kn=[];function ii(){var e=i.preRun.shift();vn.unshift(e)}var ve=0,Pe=null;function he(e){throw i.onAbort&&i.onAbort(e),e="Aborted("+e+")",we(e),bn=!0,new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info.")}function Sn(){return $.startsWith("data:application/octet-stream;base64,")}var $;if($="sql-wasm.wasm",!Sn()){var Mn=$;$=i.locateFile?i.locateFile(Mn,E):E+Mn}function qn(){var e=$;try{if(e==$&&De)return new Uint8Array(De);if(be)return be(e);throw"both async and sync fetching of the wasm failed"}catch(t){he(t)}}function si(){if(!De&&(j||O)){if(typeof fetch=="function"&&!$.startsWith("file://"))return fetch($,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+$+"'";return e.arrayBuffer()}).catch(function(){return qn()});if(Q)return new Promise(function(e,t){Q($,function(n){e(new Uint8Array(n))},t)})}return Promise.resolve().then(function(){return qn()})}var S,P;function zt(e){for(;0<e.length;)e.shift()(i)}function oe(e,t="i8"){switch(t.endsWith("*")&&(t="*"),t){case"i1":return B[e>>0];case"i8":return B[e>>0];case"i16":return at[e>>1];case"i32":return _[e>>2];case"i64":return _[e>>2];case"float":return Ct[e>>2];case"double":return Ot[e>>3];case"*":return H[e>>2];default:he("invalid type for getValue: "+t)}return null}function Fe(e){var t="i32";switch(t.endsWith("*")&&(t="*"),t){case"i1":B[e>>0]=0;break;case"i8":B[e>>0]=0;break;case"i16":at[e>>1]=0;break;case"i32":_[e>>2]=0;break;case"i64":P=[0,(S=0,1<=+Math.abs(S)?0<S?(Math.min(+Math.floor(S/4294967296),4294967295)|0)>>>0:~~+Math.ceil((S-+(~~S>>>0))/4294967296)>>>0:0)],_[e>>2]=P[0],_[e+4>>2]=P[1];break;case"float":Ct[e>>2]=0;break;case"double":Ot[e>>3]=0;break;case"*":H[e>>2]=0;break;default:he("invalid type for setValue: "+t)}}var Rt=(e,t)=>{for(var n=0,s=e.length-1;0<=s;s--){var a=e[s];a==="."?e.splice(s,1):a===".."?(e.splice(s,1),n++):n&&(e.splice(s,1),n--)}if(t)for(;n;n--)e.unshift("..");return e},ae=e=>{var t=e.charAt(0)==="/",n=e.substr(-1)==="/";return(e=Rt(e.split("/").filter(s=>!!s),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e},oi=e=>{var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1);return e=t[0],t=t[1],!e&&!t?".":(t&&(t=t.substr(0,t.length-1)),e+t)},lt=e=>{if(e==="/")return"/";e=ae(e),e=e.replace(/\/$/,"");var t=e.lastIndexOf("/");return t===-1?e:e.substr(t+1)};function ai(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var e=new Uint8Array(1);return()=>(crypto.getRandomValues(e),e[0])}if(A)try{var t=require("crypto");return()=>t.randomBytes(1)[0]}catch{}return()=>he("randomDevice")}function ct(){for(var e="",t=!1,n=arguments.length-1;-1<=n&&!t;n--){if(t=0<=n?arguments[n]:"/",typeof t!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!t)return"";e=t+"/"+e,t=t.charAt(0)==="/"}return e=Rt(e.split("/").filter(s=>!!s),!t).join("/"),(t?"/":"")+e||"."}function An(e,t){var n=Array(Ie(e)+1);return e=je(e,n,0,n.length),t&&(n.length=e),n}var En=[];function In(e,t){En[e]={input:[],output:[],Xa:t},Ht(e,li)}var li={open:function(e){var t=En[e.node.rdev];if(!t)throw new m(43);e.tty=t,e.seekable=!1},close:function(e){e.tty.Xa.fsync(e.tty)},fsync:function(e){e.tty.Xa.fsync(e.tty)},read:function(e,t,n,s){if(!e.tty||!e.tty.Xa.tb)throw new m(60);for(var a=0,d=0;d<s;d++){try{var f=e.tty.Xa.tb(e.tty)}catch{throw new m(29)}if(f===void 0&&a===0)throw new m(6);if(f==null)break;a++,t[n+d]=f}return a&&(e.node.timestamp=Date.now()),a},write:function(e,t,n,s){if(!e.tty||!e.tty.Xa.jb)throw new m(60);try{for(var a=0;a<s;a++)e.tty.Xa.jb(e.tty,t[n+a])}catch{throw new m(29)}return s&&(e.node.timestamp=Date.now()),a}},ci={tb:function(e){if(!e.input.length){var t=null;if(A){var n=Buffer.alloc(256),s=0;try{s=Ae.readSync(process.stdin.fd,n,0,256,-1)}catch(a){if(a.toString().includes("EOF"))s=0;else throw a}0<s?t=n.slice(0,s).toString("utf-8"):t=null}else typeof window<"u"&&typeof window.prompt=="function"?(t=window.prompt("Input: "),t!==null&&(t+=`
`)):typeof readline=="function"&&(t=readline(),t!==null&&(t+=`
`));if(!t)return null;e.input=An(t,!0)}return e.input.shift()},jb:function(e,t){t===null||t===10?(xn(He(e.output,0)),e.output=[]):t!=0&&e.output.push(t)},fsync:function(e){e.output&&0<e.output.length&&(xn(He(e.output,0)),e.output=[])}},ui={jb:function(e,t){t===null||t===10?(we(He(e.output,0)),e.output=[]):t!=0&&e.output.push(t)},fsync:function(e){e.output&&0<e.output.length&&(we(He(e.output,0)),e.output=[])}},M={Qa:null,Ra:function(){return M.createNode(null,"/",16895,0)},createNode:function(e,t,n,s){if((n&61440)===24576||(n&61440)===4096)throw new m(63);return M.Qa||(M.Qa={dir:{node:{Pa:M.Ga.Pa,Oa:M.Ga.Oa,lookup:M.Ga.lookup,ab:M.Ga.ab,rename:M.Ga.rename,unlink:M.Ga.unlink,rmdir:M.Ga.rmdir,readdir:M.Ga.readdir,symlink:M.Ga.symlink},stream:{Ta:M.Ha.Ta}},file:{node:{Pa:M.Ga.Pa,Oa:M.Ga.Oa},stream:{Ta:M.Ha.Ta,read:M.Ha.read,write:M.Ha.write,lb:M.Ha.lb,bb:M.Ha.bb,cb:M.Ha.cb}},link:{node:{Pa:M.Ga.Pa,Oa:M.Ga.Oa,readlink:M.Ga.readlink},stream:{}},pb:{node:{Pa:M.Ga.Pa,Oa:M.Ga.Oa},stream:mi}}),n=Rn(e,t,n,s),(n.mode&61440)===16384?(n.Ga=M.Qa.dir.node,n.Ha=M.Qa.dir.stream,n.Ia={}):(n.mode&61440)===32768?(n.Ga=M.Qa.file.node,n.Ha=M.Qa.file.stream,n.Ma=0,n.Ia=null):(n.mode&61440)===40960?(n.Ga=M.Qa.link.node,n.Ha=M.Qa.link.stream):(n.mode&61440)===8192&&(n.Ga=M.Qa.pb.node,n.Ha=M.Qa.pb.stream),n.timestamp=Date.now(),e&&(e.Ia[t]=n,e.timestamp=n.timestamp),n},Jb:function(e){return e.Ia?e.Ia.subarray?e.Ia.subarray(0,e.Ma):new Uint8Array(e.Ia):new Uint8Array(0)},qb:function(e,t){var n=e.Ia?e.Ia.length:0;n>=t||(t=Math.max(t,n*(1048576>n?2:1.125)>>>0),n!=0&&(t=Math.max(t,256)),n=e.Ia,e.Ia=new Uint8Array(t),0<e.Ma&&e.Ia.set(n.subarray(0,e.Ma),0))},Gb:function(e,t){if(e.Ma!=t)if(t==0)e.Ia=null,e.Ma=0;else{var n=e.Ia;e.Ia=new Uint8Array(t),n&&e.Ia.set(n.subarray(0,Math.min(t,e.Ma))),e.Ma=t}},Ga:{Pa:function(e){var t={};return t.dev=(e.mode&61440)===8192?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,(e.mode&61440)===16384?t.size=4096:(e.mode&61440)===32768?t.size=e.Ma:(e.mode&61440)===40960?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.Ab=4096,t.blocks=Math.ceil(t.size/t.Ab),t},Oa:function(e,t){t.mode!==void 0&&(e.mode=t.mode),t.timestamp!==void 0&&(e.timestamp=t.timestamp),t.size!==void 0&&M.Gb(e,t.size)},lookup:function(){throw Tt[44]},ab:function(e,t,n,s){return M.createNode(e,t,n,s)},rename:function(e,t,n){if((e.mode&61440)===16384){try{var s=_e(t,n)}catch{}if(s)for(var a in s.Ia)throw new m(55)}delete e.parent.Ia[e.name],e.parent.timestamp=Date.now(),e.name=n,t.Ia[n]=e,t.timestamp=e.parent.timestamp,e.parent=t},unlink:function(e,t){delete e.Ia[t],e.timestamp=Date.now()},rmdir:function(e,t){var n=_e(e,t),s;for(s in n.Ia)throw new m(55);delete e.Ia[t],e.timestamp=Date.now()},readdir:function(e){var t=[".",".."],n;for(n in e.Ia)e.Ia.hasOwnProperty(n)&&t.push(n);return t},symlink:function(e,t,n){return e=M.createNode(e,t,41471,0),e.link=n,e},readlink:function(e){if((e.mode&61440)!==40960)throw new m(28);return e.link}},Ha:{read:function(e,t,n,s,a){var d=e.node.Ia;if(a>=e.node.Ma)return 0;if(e=Math.min(e.node.Ma-a,s),8<e&&d.subarray)t.set(d.subarray(a,a+e),n);else for(s=0;s<e;s++)t[n+s]=d[a+s];return e},write:function(e,t,n,s,a,d){if(t.buffer===B.buffer&&(d=!1),!s)return 0;if(e=e.node,e.timestamp=Date.now(),t.subarray&&(!e.Ia||e.Ia.subarray)){if(d)return e.Ia=t.subarray(n,n+s),e.Ma=s;if(e.Ma===0&&a===0)return e.Ia=t.slice(n,n+s),e.Ma=s;if(a+s<=e.Ma)return e.Ia.set(t.subarray(n,n+s),a),s}if(M.qb(e,a+s),e.Ia.subarray&&t.subarray)e.Ia.set(t.subarray(n,n+s),a);else for(d=0;d<s;d++)e.Ia[a+d]=t[n+d];return e.Ma=Math.max(e.Ma,a+s),s},Ta:function(e,t,n){if(n===1?t+=e.position:n===2&&(e.node.mode&61440)===32768&&(t+=e.node.Ma),0>t)throw new m(28);return t},lb:function(e,t,n){M.qb(e.node,t+n),e.node.Ma=Math.max(e.node.Ma,t+n)},bb:function(e,t,n,s,a){if((e.node.mode&61440)!==32768)throw new m(43);if(e=e.node.Ia,a&2||e.buffer!==It){if((0<n||n+t<e.length)&&(e.subarray?e=e.subarray(n,n+t):e=Array.prototype.slice.call(e,n,n+t)),n=!0,t=65536*Math.ceil(t/65536),(a=nr(65536,t))?(ne.fill(0,a,a+t),t=a):t=0,!t)throw new m(48);B.set(e,t)}else n=!1,t=e.byteOffset;return{Fb:t,vb:n}},cb:function(e,t,n,s,a){if((e.node.mode&61440)!==32768)throw new m(43);return a&2||M.Ha.write(e,t,0,s,n,!1),0}}},Lt=null,Cn={},fe=[],di=1,me=null,On=!0,m=null,Tt={},G=(e,t={})=>{if(e=ct("/",e),!e)return{path:"",node:null};if(t=Object.assign({rb:!0,kb:0},t),8<t.kb)throw new m(32);e=Rt(e.split("/").filter(f=>!!f),!1);for(var n=Lt,s="/",a=0;a<e.length;a++){var d=a===e.length-1;if(d&&t.parent)break;if(n=_e(n,e[a]),s=ae(s+"/"+e[a]),n.Va&&(!d||d&&t.rb)&&(n=n.Va.root),!d||t.Sa){for(d=0;(n.mode&61440)===40960;)if(n=Nn(s),s=ct(oi(s),n),n=G(s,{kb:t.kb+1}).node,40<d++)throw new m(32)}}return{path:s,node:n}},Ke=e=>{for(var t;;){if(e===e.parent)return e=e.Ra.ub,t?e[e.length-1]!=="/"?e+"/"+t:e+t:e;t=t?e.name+"/"+t:e.name,e=e.parent}},Dt=(e,t)=>{for(var n=0,s=0;s<t.length;s++)n=(n<<5)-n+t.charCodeAt(s)|0;return(e+n>>>0)%me.length},zn=e=>{var t=Dt(e.parent.id,e.name);if(me[t]===e)me[t]=e.Wa;else for(t=me[t];t;){if(t.Wa===e){t.Wa=e.Wa;break}t=t.Wa}},_e=(e,t)=>{var n;if(n=(n=Ce(e,"x"))?n:e.Ga.lookup?0:2)throw new m(n,e);for(n=me[Dt(e.id,t)];n;n=n.Wa){var s=n.name;if(n.parent.id===e.id&&s===t)return n}return e.Ga.lookup(e,t)},Rn=(e,t,n,s)=>(e=new er(e,t,n,s),t=Dt(e.parent.id,e.name),e.Wa=me[t],me[t]=e),hi={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},Ln=e=>{var t=["r","w","rw"][e&3];return e&512&&(t+="w"),t},Ce=(e,t)=>{if(On)return 0;if(!t.includes("r")||e.mode&292){if(t.includes("w")&&!(e.mode&146)||t.includes("x")&&!(e.mode&73))return 2}else return 2;return 0},Tn=(e,t)=>{try{return _e(e,t),20}catch{}return Ce(e,"wx")},Dn=(e,t,n)=>{try{var s=_e(e,t)}catch(a){return a.Ka}if(e=Ce(e,"wx"))return e;if(n){if((s.mode&61440)!==16384)return 54;if(s===s.parent||Ke(s)==="/")return 10}else if((s.mode&61440)===16384)return 31;return 0},fi=(e=0)=>{for(;4096>=e;e++)if(!fe[e])return e;throw new m(33)},Hn=(e,t)=>(Ue||(Ue=function(){this.$a={}},Ue.prototype={},Object.defineProperties(Ue.prototype,{object:{get:function(){return this.node},set:function(n){this.node=n}},flags:{get:function(){return this.$a.flags},set:function(n){this.$a.flags=n}},position:{get:function(){return this.$a.position},set:function(n){this.$a.position=n}}})),e=Object.assign(new Ue,e),t=fi(t),e.fd=t,fe[t]=e),mi={open:e=>{e.Ha=Cn[e.node.rdev].Ha,e.Ha.open&&e.Ha.open(e)},Ta:()=>{throw new m(70)}},Ht=(e,t)=>{Cn[e]={Ha:t}},Pn=(e,t)=>{var n=t==="/",s=!t;if(n&&Lt)throw new m(10);if(!n&&!s){var a=G(t,{rb:!1});if(t=a.path,a=a.node,a.Va)throw new m(10);if((a.mode&61440)!==16384)throw new m(54)}t={type:e,Kb:{},ub:t,Eb:[]},e=e.Ra(t),e.Ra=t,t.root=e,n?Lt=e:a&&(a.Va=t,a.Ra&&a.Ra.Eb.push(t))},ut=(e,t,n)=>{var s=G(e,{parent:!0}).node;if(e=lt(e),!e||e==="."||e==="..")throw new m(28);var a=Tn(s,e);if(a)throw new m(a);if(!s.Ga.ab)throw new m(63);return s.Ga.ab(s,e,t,n)},re=(e,t)=>ut(e,(t!==void 0?t:511)&1023|16384,0),dt=(e,t,n)=>{typeof n>"u"&&(n=t,t=438),ut(e,t|8192,n)},Pt=(e,t)=>{if(!ct(e))throw new m(44);var n=G(t,{parent:!0}).node;if(!n)throw new m(44);t=lt(t);var s=Tn(n,t);if(s)throw new m(s);if(!n.Ga.symlink)throw new m(63);n.Ga.symlink(n,t,e)},Fn=e=>{var t=G(e,{parent:!0}).node;e=lt(e);var n=_e(t,e),s=Dn(t,e,!0);if(s)throw new m(s);if(!t.Ga.rmdir)throw new m(63);if(n.Va)throw new m(10);t.Ga.rmdir(t,e),zn(n)},Kn=e=>{var t=G(e,{parent:!0}).node;if(!t)throw new m(44);e=lt(e);var n=_e(t,e),s=Dn(t,e,!1);if(s)throw new m(s);if(!t.Ga.unlink)throw new m(63);if(n.Va)throw new m(10);t.Ga.unlink(t,e),zn(n)},Nn=e=>{if(e=G(e).node,!e)throw new m(44);if(!e.Ga.readlink)throw new m(28);return ct(Ke(e.parent),e.Ga.readlink(e))},Ne=(e,t)=>{if(e=G(e,{Sa:!t}).node,!e)throw new m(44);if(!e.Ga.Pa)throw new m(63);return e.Ga.Pa(e)},Bn=e=>Ne(e,!0),ht=(e,t)=>{if(e=typeof e=="string"?G(e,{Sa:!0}).node:e,!e.Ga.Oa)throw new m(63);e.Ga.Oa(e,{mode:t&4095|e.mode&-4096,timestamp:Date.now()})},Un=(e,t)=>{if(0>t)throw new m(28);if(e=typeof e=="string"?G(e,{Sa:!0}).node:e,!e.Ga.Oa)throw new m(63);if((e.mode&61440)===16384)throw new m(31);if((e.mode&61440)!==32768)throw new m(28);var n=Ce(e,"w");if(n)throw new m(n);e.Ga.Oa(e,{size:t,timestamp:Date.now()})},Oe=(e,t,n)=>{if(e==="")throw new m(44);if(typeof t=="string"){var s=hi[t];if(typeof s>"u")throw Error("Unknown file open mode: "+t);t=s}if(n=t&64?(typeof n>"u"?438:n)&4095|32768:0,typeof e=="object")var a=e;else{e=ae(e);try{a=G(e,{Sa:!(t&131072)}).node}catch{}}if(s=!1,t&64)if(a){if(t&128)throw new m(20)}else a=ut(e,n,0),s=!0;if(!a)throw new m(44);if((a.mode&61440)===8192&&(t&=-513),t&65536&&(a.mode&61440)!==16384)throw new m(54);if(!s&&(n=a?(a.mode&61440)===40960?32:(a.mode&61440)===16384&&(Ln(t)!=="r"||t&512)?31:Ce(a,Ln(t)):44))throw new m(n);return t&512&&!s&&Un(a,0),t&=-131713,a=Hn({node:a,path:Ke(a),flags:t,seekable:!0,position:0,Ha:a.Ha,Ib:[],error:!1}),a.Ha.open&&a.Ha.open(a),!i.logReadFiles||t&1||(ft||(ft={}),e in ft||(ft[e]=1)),a},Ft=e=>{if(e.fd===null)throw new m(8);e.hb&&(e.hb=null);try{e.Ha.close&&e.Ha.close(e)}catch(t){throw t}finally{fe[e.fd]=null}e.fd=null},Wn=(e,t,n)=>{if(e.fd===null)throw new m(8);if(!e.seekable||!e.Ha.Ta)throw new m(70);if(n!=0&&n!=1&&n!=2)throw new m(28);e.position=e.Ha.Ta(e,t,n),e.Ib=[]},Gn=(e,t,n,s,a)=>{if(0>s||0>a)throw new m(28);if(e.fd===null)throw new m(8);if((e.flags&2097155)===1)throw new m(8);if((e.node.mode&61440)===16384)throw new m(31);if(!e.Ha.read)throw new m(28);var d=typeof a<"u";if(!d)a=e.position;else if(!e.seekable)throw new m(70);return t=e.Ha.read(e,t,n,s,a),d||(e.position+=t),t},Vn=(e,t,n,s,a)=>{if(0>s||0>a)throw new m(28);if(e.fd===null)throw new m(8);if(!(e.flags&2097155))throw new m(8);if((e.node.mode&61440)===16384)throw new m(31);if(!e.Ha.write)throw new m(28);e.seekable&&e.flags&1024&&Wn(e,0,2);var d=typeof a<"u";if(!d)a=e.position;else if(!e.seekable)throw new m(70);return t=e.Ha.write(e,t,n,s,a,void 0),d||(e.position+=t),t},pi=e=>{var t,n=Oe(e,n||0);e=Ne(e).size;var s=new Uint8Array(e);return Gn(n,s,0,e,0),t=s,Ft(n),t},Qn=()=>{m||(m=function(e,t){this.node=t,this.Hb=function(n){this.Ka=n},this.Hb(e),this.message="FS error"},m.prototype=Error(),m.prototype.constructor=m,[44].forEach(e=>{Tt[e]=new m(e),Tt[e].stack="<generic error, no stack>"}))},$n,Jn=(e,t)=>{var n=0;return e&&(n|=365),t&&(n|=146),n},Be=(e,t,n)=>{e=ae("/dev/"+e);var s=Jn(!!t,!!n);Kt||(Kt=64);var a=Kt++<<8|0;Ht(a,{open:d=>{d.seekable=!1},close:()=>{n&&n.buffer&&n.buffer.length&&n(10)},read:(d,f,k,C)=>{for(var I=0,F=0;F<C;F++){try{var le=t()}catch{throw new m(29)}if(le===void 0&&I===0)throw new m(6);if(le==null)break;I++,f[k+F]=le}return I&&(d.node.timestamp=Date.now()),I},write:(d,f,k,C)=>{for(var I=0;I<C;I++)try{n(f[k+I])}catch{throw new m(29)}return C&&(d.node.timestamp=Date.now()),I}}),dt(e,s,a)},Kt,D={},Ue,ft;function ke(e,t,n){if(t.charAt(0)==="/")return t;if(e=e===-100?"/":Z(e).path,t.length==0){if(!n)throw new m(44);return e}return ae(e+"/"+t)}function mt(e,t,n){try{var s=e(t)}catch(a){if(a&&a.node&&ae(t)!==ae(Ke(a.node)))return-54;throw a}return _[n>>2]=s.dev,_[n+8>>2]=s.ino,_[n+12>>2]=s.mode,H[n+16>>2]=s.nlink,_[n+20>>2]=s.uid,_[n+24>>2]=s.gid,_[n+28>>2]=s.rdev,P=[s.size>>>0,(S=s.size,1<=+Math.abs(S)?0<S?(Math.min(+Math.floor(S/4294967296),4294967295)|0)>>>0:~~+Math.ceil((S-+(~~S>>>0))/4294967296)>>>0:0)],_[n+40>>2]=P[0],_[n+44>>2]=P[1],_[n+48>>2]=4096,_[n+52>>2]=s.blocks,P=[Math.floor(s.atime.getTime()/1e3)>>>0,(S=Math.floor(s.atime.getTime()/1e3),1<=+Math.abs(S)?0<S?(Math.min(+Math.floor(S/4294967296),4294967295)|0)>>>0:~~+Math.ceil((S-+(~~S>>>0))/4294967296)>>>0:0)],_[n+56>>2]=P[0],_[n+60>>2]=P[1],H[n+64>>2]=0,P=[Math.floor(s.mtime.getTime()/1e3)>>>0,(S=Math.floor(s.mtime.getTime()/1e3),1<=+Math.abs(S)?0<S?(Math.min(+Math.floor(S/4294967296),4294967295)|0)>>>0:~~+Math.ceil((S-+(~~S>>>0))/4294967296)>>>0:0)],_[n+72>>2]=P[0],_[n+76>>2]=P[1],H[n+80>>2]=0,P=[Math.floor(s.ctime.getTime()/1e3)>>>0,(S=Math.floor(s.ctime.getTime()/1e3),1<=+Math.abs(S)?0<S?(Math.min(+Math.floor(S/4294967296),4294967295)|0)>>>0:~~+Math.ceil((S-+(~~S>>>0))/4294967296)>>>0:0)],_[n+88>>2]=P[0],_[n+92>>2]=P[1],H[n+96>>2]=0,P=[s.ino>>>0,(S=s.ino,1<=+Math.abs(S)?0<S?(Math.min(+Math.floor(S/4294967296),4294967295)|0)>>>0:~~+Math.ceil((S-+(~~S>>>0))/4294967296)>>>0:0)],_[n+104>>2]=P[0],_[n+108>>2]=P[1],0}var pt=void 0;function yt(){return pt+=4,_[pt-4>>2]}function Z(e){if(e=fe[e],!e)throw new m(8);return e}function Nt(e){return H[e>>2]+4294967296*_[e+4>>2]}function Yn(e){var t=Ie(e)+1,n=gt(t);return n&&je(e,B,n,t),n}function yi(e,t,n){function s(C){return(C=C.toTimeString().match(/\(([A-Za-z ]+)\)$/))?C[1]:"GMT"}var a=new Date().getFullYear(),d=new Date(a,0,1),f=new Date(a,6,1);a=d.getTimezoneOffset();var k=f.getTimezoneOffset();_[e>>2]=60*Math.max(a,k),_[t>>2]=+(a!=k),e=s(d),t=s(f),e=Yn(e),t=Yn(t),k<a?(H[n>>2]=e,H[n+4>>2]=t):(H[n>>2]=t,H[n+4>>2]=e)}function Bt(e,t,n){Bt.Bb||(Bt.Bb=!0,yi(e,t,n))}var Xn;Xn=A?()=>{var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:()=>performance.now();var Ut={};function Zn(){if(!Wt){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:w||"./this.program"},t;for(t in Ut)Ut[t]===void 0?delete e[t]:e[t]=Ut[t];var n=[];for(t in e)n.push(t+"="+e[t]);Wt=n}return Wt}var Wt,pe=void 0,Gt=[];function Vt(e,t){if(!pe){pe=new WeakMap;var n=de.length;if(pe)for(var s=0;s<0+n;s++){var a=de.get(s);a&&pe.set(a,s)}}if(pe.has(e))return pe.get(e);if(Gt.length)n=Gt.pop();else{try{de.grow(1)}catch(k){throw k instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":k}n=de.length-1}try{de.set(n,e)}catch(k){if(!(k instanceof TypeError))throw k;if(typeof WebAssembly.Function=="function"){s=WebAssembly.Function,a={i:"i32",j:"i64",f:"f32",d:"f64",p:"i32"};for(var d={parameters:[],results:t[0]=="v"?[]:[a[t[0]]]},f=1;f<t.length;++f)d.parameters.push(a[t[f]]);t=new s(d,e)}else{for(s=[1,96],a=t.slice(0,1),t=t.slice(1),d={i:127,p:127,j:126,f:125,d:124},f=t.length,128>f?s.push(f):s.push(f%128|128,f>>7),f=0;f<t.length;++f)s.push(d[t[f]]);a=="v"?s.push(0):s.push(1,d[a]),t=[0,97,115,109,1,0,0,0,1],a=s.length,128>a?t.push(a):t.push(a%128|128,a>>7),t.push.apply(t,s),t.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),t=new WebAssembly.Module(new Uint8Array(t)),t=new WebAssembly.Instance(t,{e:{f:e}}).exports.f}de.set(n,t)}return pe.set(e,n),n}function We(e){pe.delete(de.get(e)),Gt.push(e)}function Qt(e){var t=gt(e.length);return e.subarray||e.slice||(e=new Uint8Array(e)),ne.set(e,t),t}function gi(e,t,n,s){var a={string:I=>{var F=0;if(I!=null&&I!==0){var le=(I.length<<2)+1;F=ye(le),je(I,ne,F,le)}return F},array:I=>{var F=ye(I.length);return B.set(I,F),F}};e=i["_"+e];var d=[],f=0;if(s)for(var k=0;k<s.length;k++){var C=a[n[k]];C?(f===0&&(f=Ge()),d[k]=C(s[k])):d[k]=s[k]}return n=e.apply(null,d),n=function(I){return f!==0&&Ve(f),t==="string"?U(I):t==="boolean"?!!I:I}(n)}function er(e,t,n,s){e||(e=this),this.parent=e,this.Ra=e.Ra,this.Va=null,this.id=di++,this.name=t,this.mode=n,this.Ga={},this.Ha={},this.rdev=s}Object.defineProperties(er.prototype,{read:{get:function(){return(this.mode&365)===365},set:function(e){e?this.mode|=365:this.mode&=-366}},write:{get:function(){return(this.mode&146)===146},set:function(e){e?this.mode|=146:this.mode&=-147}}}),Qn(),me=Array(4096),Pn(M,"/"),re("/tmp"),re("/home"),re("/home/web_user"),(()=>{re("/dev"),Ht(259,{read:()=>0,write:(t,n,s,a)=>a}),dt("/dev/null",259),In(1280,ci),In(1536,ui),dt("/dev/tty",1280),dt("/dev/tty1",1536);var e=ai();Be("random",e),Be("urandom",e),re("/dev/shm"),re("/dev/shm/tmp")})(),(()=>{re("/proc");var e=re("/proc/self");re("/proc/self/fd"),Pn({Ra:()=>{var t=Rn(e,"fd",16895,73);return t.Ga={lookup:(n,s)=>{var a=fe[+s];if(!a)throw new m(8);return n={parent:null,Ra:{ub:"fake"},Ga:{readlink:()=>a.path}},n.parent=n}},t}},"/proc/self/fd")})();var xi={a:function(e,t,n,s){he("Assertion failed: "+U(e)+", at: "+[t?U(t):"unknown filename",n,s?U(s):"unknown function"])},h:function(e,t){try{return e=U(e),ht(e,t),0}catch(n){if(typeof D>"u"||!(n instanceof m))throw n;return-n.Ka}},H:function(e,t,n){try{if(t=U(t),t=ke(e,t),n&-8)return-28;var s=G(t,{Sa:!0}).node;return s?(e="",n&4&&(e+="r"),n&2&&(e+="w"),n&1&&(e+="x"),e&&Ce(s,e)?-2:0):-44}catch(a){if(typeof D>"u"||!(a instanceof m))throw a;return-a.Ka}},i:function(e,t){try{var n=fe[e];if(!n)throw new m(8);return ht(n.node,t),0}catch(s){if(typeof D>"u"||!(s instanceof m))throw s;return-s.Ka}},g:function(e){try{var t=fe[e];if(!t)throw new m(8);var n=t.node,s=typeof n=="string"?G(n,{Sa:!0}).node:n;if(!s.Ga.Oa)throw new m(63);return s.Ga.Oa(s,{timestamp:Date.now()}),0}catch(a){if(typeof D>"u"||!(a instanceof m))throw a;return-a.Ka}},b:function(e,t,n){pt=n;try{var s=Z(e);switch(t){case 0:var a=yt();return 0>a?-28:Hn(s,a).fd;case 1:case 2:return 0;case 3:return s.flags;case 4:return a=yt(),s.flags|=a,0;case 5:return a=yt(),at[a+0>>1]=2,0;case 6:case 7:return 0;case 16:case 8:return-28;case 9:return _[tr()>>2]=28,-1;default:return-28}}catch(d){if(typeof D>"u"||!(d instanceof m))throw d;return-d.Ka}},G:function(e,t){try{var n=Z(e);return mt(Ne,n.path,t)}catch(s){if(typeof D>"u"||!(s instanceof m))throw s;return-s.Ka}},l:function(e,t,n){try{if(t=n+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*n:NaN,isNaN(t))return-61;var s=fe[e];if(!s)throw new m(8);if(!(s.flags&2097155))throw new m(28);return Un(s.node,t),0}catch(a){if(typeof D>"u"||!(a instanceof m))throw a;return-a.Ka}},B:function(e,t){try{if(t===0)return-28;var n=Ie("/")+1;return t<n?-68:(je("/",ne,e,t),n)}catch(s){if(typeof D>"u"||!(s instanceof m))throw s;return-s.Ka}},E:function(e,t){try{return e=U(e),mt(Bn,e,t)}catch(n){if(typeof D>"u"||!(n instanceof m))throw n;return-n.Ka}},y:function(e,t,n){try{return t=U(t),t=ke(e,t),t=ae(t),t[t.length-1]==="/"&&(t=t.substr(0,t.length-1)),re(t,n),0}catch(s){if(typeof D>"u"||!(s instanceof m))throw s;return-s.Ka}},D:function(e,t,n,s){try{t=U(t);var a=s&256;return t=ke(e,t,s&4096),mt(a?Bn:Ne,t,n)}catch(d){if(typeof D>"u"||!(d instanceof m))throw d;return-d.Ka}},v:function(e,t,n,s){pt=s;try{t=U(t),t=ke(e,t);var a=s?yt():0;return Oe(t,n,a).fd}catch(d){if(typeof D>"u"||!(d instanceof m))throw d;return-d.Ka}},t:function(e,t,n,s){try{if(t=U(t),t=ke(e,t),0>=s)return-28;var a=Nn(t),d=Math.min(s,Ie(a)),f=B[n+d];return je(a,ne,n,s+1),B[n+d]=f,d}catch(k){if(typeof D>"u"||!(k instanceof m))throw k;return-k.Ka}},s:function(e){try{return e=U(e),Fn(e),0}catch(t){if(typeof D>"u"||!(t instanceof m))throw t;return-t.Ka}},F:function(e,t){try{return e=U(e),mt(Ne,e,t)}catch(n){if(typeof D>"u"||!(n instanceof m))throw n;return-n.Ka}},p:function(e,t,n){try{return t=U(t),t=ke(e,t),n===0?Kn(t):n===512?Fn(t):he("Invalid flags passed to unlinkat"),0}catch(s){if(typeof D>"u"||!(s instanceof m))throw s;return-s.Ka}},o:function(e,t,n){try{if(t=U(t),t=ke(e,t,!0),n){var s=Nt(n),a=_[n+8>>2];d=1e3*s+a/1e6,n+=16,s=Nt(n),a=_[n+8>>2],f=1e3*s+a/1e6}else var d=Date.now(),f=d;e=d;var k=G(t,{Sa:!0}).node;return k.Ga.Oa(k,{timestamp:Math.max(e,f)}),0}catch(C){if(typeof D>"u"||!(C instanceof m))throw C;return-C.Ka}},e:function(){return Date.now()},j:function(e,t){e=new Date(1e3*Nt(e)),_[t>>2]=e.getSeconds(),_[t+4>>2]=e.getMinutes(),_[t+8>>2]=e.getHours(),_[t+12>>2]=e.getDate(),_[t+16>>2]=e.getMonth(),_[t+20>>2]=e.getFullYear()-1900,_[t+24>>2]=e.getDay();var n=new Date(e.getFullYear(),0,1);_[t+28>>2]=(e.getTime()-n.getTime())/864e5|0,_[t+36>>2]=-(60*e.getTimezoneOffset());var s=new Date(e.getFullYear(),6,1).getTimezoneOffset();n=n.getTimezoneOffset(),_[t+32>>2]=(s!=n&&e.getTimezoneOffset()==Math.min(n,s))|0},w:function(e,t,n,s,a,d){try{var f=Z(s);if(t&2&&!(n&2)&&(f.flags&2097155)!==2)throw new m(2);if((f.flags&2097155)===1)throw new m(2);if(!f.Ha.bb)throw new m(43);var k=f.Ha.bb(f,e,a,t,n),C=k.Fb;return _[d>>2]=k.vb,C}catch(I){if(typeof D>"u"||!(I instanceof m))throw I;return-I.Ka}},x:function(e,t,n,s,a,d){try{var f=Z(a);if(n&2){var k=ne.slice(e,e+t);f&&f.Ha.cb&&f.Ha.cb(f,k,d,t,s)}}catch(C){if(typeof D>"u"||!(C instanceof m))throw C;return-C.Ka}},n:Bt,q:function(){return 2147483648},d:Xn,c:function(e){var t=ne.length;if(e>>>=0,2147483648<e)return!1;for(var n=1;4>=n;n*=2){var s=t*(1+.2/n);s=Math.min(s,e+100663296);var a=Math;s=Math.max(e,s),a=a.min.call(a,2147483648,s+(65536-s%65536)%65536);e:{try{Et.grow(a-It.byteLength+65535>>>16),jn();var d=1;break e}catch{}d=void 0}if(d)return!0}return!1},z:function(e,t){var n=0;return Zn().forEach(function(s,a){var d=t+n;for(a=H[e+4*a>>2]=d,d=0;d<s.length;++d)B[a++>>0]=s.charCodeAt(d);B[a>>0]=0,n+=s.length+1}),0},A:function(e,t){var n=Zn();H[e>>2]=n.length;var s=0;return n.forEach(function(a){s+=a.length+1}),H[t>>2]=s,0},f:function(e){try{var t=Z(e);return Ft(t),0}catch(n){if(typeof D>"u"||!(n instanceof m))throw n;return n.Ka}},m:function(e,t){try{var n=Z(e);return B[t>>0]=n.tty?2:(n.mode&61440)===16384?3:(n.mode&61440)===40960?7:4,0}catch(s){if(typeof D>"u"||!(s instanceof m))throw s;return s.Ka}},u:function(e,t,n,s){try{e:{var a=Z(e);e=t;for(var d=t=0;d<n;d++){var f=H[e>>2],k=H[e+4>>2];e+=8;var C=Gn(a,B,f,k);if(0>C){var I=-1;break e}if(t+=C,C<k)break}I=t}return H[s>>2]=I,0}catch(F){if(typeof D>"u"||!(F instanceof m))throw F;return F.Ka}},k:function(e,t,n,s,a){try{if(t=n+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*n:NaN,isNaN(t))return 61;var d=Z(e);return Wn(d,t,s),P=[d.position>>>0,(S=d.position,1<=+Math.abs(S)?0<S?(Math.min(+Math.floor(S/4294967296),4294967295)|0)>>>0:~~+Math.ceil((S-+(~~S>>>0))/4294967296)>>>0:0)],_[a>>2]=P[0],_[a+4>>2]=P[1],d.hb&&t===0&&s===0&&(d.hb=null),0}catch(f){if(typeof D>"u"||!(f instanceof m))throw f;return f.Ka}},C:function(e){try{var t=Z(e);return t.Ha&&t.Ha.fsync?t.Ha.fsync(t):0}catch(n){if(typeof D>"u"||!(n instanceof m))throw n;return n.Ka}},r:function(e,t,n,s){try{e:{var a=Z(e);e=t;for(var d=t=0;d<n;d++){var f=H[e>>2],k=H[e+4>>2];e+=8;var C=Vn(a,B,f,k);if(0>C){var I=-1;break e}t+=C}I=t}return H[s>>2]=I,0}catch(F){if(typeof D>"u"||!(F instanceof m))throw F;return F.Ka}}};(function(){function e(a){i.asm=a.exports,Et=i.asm.I,jn(),de=i.asm.Aa,_n.unshift(i.asm.J),ve--,i.monitorRunDependencies&&i.monitorRunDependencies(ve),ve==0&&Pe&&(a=Pe,Pe=null,a())}function t(a){e(a.instance)}function n(a){return si().then(function(d){return WebAssembly.instantiate(d,s)}).then(function(d){return d}).then(a,function(d){we("failed to asynchronously prepare wasm: "+d),he(d)})}var s={a:xi};if(ve++,i.monitorRunDependencies&&i.monitorRunDependencies(ve),i.instantiateWasm)try{return i.instantiateWasm(s,e)}catch(a){return we("Module.instantiateWasm callback failed with error: "+a),!1}return function(){return De||typeof WebAssembly.instantiateStreaming!="function"||Sn()||$.startsWith("file://")||A||typeof fetch!="function"?n(t):fetch($,{credentials:"same-origin"}).then(function(a){return WebAssembly.instantiateStreaming(a,s).then(t,function(d){return we("wasm streaming compile failed: "+d),we("falling back to ArrayBuffer instantiation"),n(t)})})}(),{}})(),i.___wasm_call_ctors=function(){return(i.___wasm_call_ctors=i.asm.J).apply(null,arguments)},i._sqlite3_free=function(){return(i._sqlite3_free=i.asm.K).apply(null,arguments)},i._sqlite3_value_double=function(){return(i._sqlite3_value_double=i.asm.L).apply(null,arguments)},i._sqlite3_value_text=function(){return(i._sqlite3_value_text=i.asm.M).apply(null,arguments)};var tr=i.___errno_location=function(){return(tr=i.___errno_location=i.asm.N).apply(null,arguments)};i._sqlite3_prepare_v2=function(){return(i._sqlite3_prepare_v2=i.asm.O).apply(null,arguments)},i._sqlite3_step=function(){return(i._sqlite3_step=i.asm.P).apply(null,arguments)},i._sqlite3_finalize=function(){return(i._sqlite3_finalize=i.asm.Q).apply(null,arguments)},i._sqlite3_reset=function(){return(i._sqlite3_reset=i.asm.R).apply(null,arguments)},i._sqlite3_value_int=function(){return(i._sqlite3_value_int=i.asm.S).apply(null,arguments)},i._sqlite3_clear_bindings=function(){return(i._sqlite3_clear_bindings=i.asm.T).apply(null,arguments)},i._sqlite3_value_blob=function(){return(i._sqlite3_value_blob=i.asm.U).apply(null,arguments)},i._sqlite3_value_bytes=function(){return(i._sqlite3_value_bytes=i.asm.V).apply(null,arguments)},i._sqlite3_value_type=function(){return(i._sqlite3_value_type=i.asm.W).apply(null,arguments)},i._sqlite3_result_blob=function(){return(i._sqlite3_result_blob=i.asm.X).apply(null,arguments)},i._sqlite3_result_double=function(){return(i._sqlite3_result_double=i.asm.Y).apply(null,arguments)},i._sqlite3_result_error=function(){return(i._sqlite3_result_error=i.asm.Z).apply(null,arguments)},i._sqlite3_result_int=function(){return(i._sqlite3_result_int=i.asm._).apply(null,arguments)},i._sqlite3_result_int64=function(){return(i._sqlite3_result_int64=i.asm.$).apply(null,arguments)},i._sqlite3_result_null=function(){return(i._sqlite3_result_null=i.asm.aa).apply(null,arguments)},i._sqlite3_result_text=function(){return(i._sqlite3_result_text=i.asm.ba).apply(null,arguments)},i._sqlite3_sql=function(){return(i._sqlite3_sql=i.asm.ca).apply(null,arguments)},i._sqlite3_aggregate_context=function(){return(i._sqlite3_aggregate_context=i.asm.da).apply(null,arguments)},i._sqlite3_column_count=function(){return(i._sqlite3_column_count=i.asm.ea).apply(null,arguments)},i._sqlite3_data_count=function(){return(i._sqlite3_data_count=i.asm.fa).apply(null,arguments)},i._sqlite3_column_blob=function(){return(i._sqlite3_column_blob=i.asm.ga).apply(null,arguments)},i._sqlite3_column_bytes=function(){return(i._sqlite3_column_bytes=i.asm.ha).apply(null,arguments)},i._sqlite3_column_double=function(){return(i._sqlite3_column_double=i.asm.ia).apply(null,arguments)},i._sqlite3_column_text=function(){return(i._sqlite3_column_text=i.asm.ja).apply(null,arguments)},i._sqlite3_column_type=function(){return(i._sqlite3_column_type=i.asm.ka).apply(null,arguments)},i._sqlite3_column_name=function(){return(i._sqlite3_column_name=i.asm.la).apply(null,arguments)},i._sqlite3_bind_blob=function(){return(i._sqlite3_bind_blob=i.asm.ma).apply(null,arguments)},i._sqlite3_bind_double=function(){return(i._sqlite3_bind_double=i.asm.na).apply(null,arguments)},i._sqlite3_bind_int=function(){return(i._sqlite3_bind_int=i.asm.oa).apply(null,arguments)},i._sqlite3_bind_text=function(){return(i._sqlite3_bind_text=i.asm.pa).apply(null,arguments)},i._sqlite3_bind_parameter_index=function(){return(i._sqlite3_bind_parameter_index=i.asm.qa).apply(null,arguments)},i._sqlite3_normalized_sql=function(){return(i._sqlite3_normalized_sql=i.asm.ra).apply(null,arguments)},i._sqlite3_errmsg=function(){return(i._sqlite3_errmsg=i.asm.sa).apply(null,arguments)},i._sqlite3_exec=function(){return(i._sqlite3_exec=i.asm.ta).apply(null,arguments)},i._sqlite3_changes=function(){return(i._sqlite3_changes=i.asm.ua).apply(null,arguments)},i._sqlite3_close_v2=function(){return(i._sqlite3_close_v2=i.asm.va).apply(null,arguments)},i._sqlite3_create_function_v2=function(){return(i._sqlite3_create_function_v2=i.asm.wa).apply(null,arguments)},i._sqlite3_open=function(){return(i._sqlite3_open=i.asm.xa).apply(null,arguments)};var gt=i._malloc=function(){return(gt=i._malloc=i.asm.ya).apply(null,arguments)},xt=i._free=function(){return(xt=i._free=i.asm.za).apply(null,arguments)};i._RegisterExtensionFunctions=function(){return(i._RegisterExtensionFunctions=i.asm.Ba).apply(null,arguments)};var nr=i._emscripten_builtin_memalign=function(){return(nr=i._emscripten_builtin_memalign=i.asm.Ca).apply(null,arguments)},Ge=i.stackSave=function(){return(Ge=i.stackSave=i.asm.Da).apply(null,arguments)},Ve=i.stackRestore=function(){return(Ve=i.stackRestore=i.asm.Ea).apply(null,arguments)},ye=i.stackAlloc=function(){return(ye=i.stackAlloc=i.asm.Fa).apply(null,arguments)};i.UTF8ToString=U,i.stackAlloc=ye,i.stackSave=Ge,i.stackRestore=Ve,i.cwrap=function(e,t,n,s){n=n||[];var a=n.every(d=>d==="number"||d==="boolean");return t!=="string"&&a&&!s?i["_"+e]:function(){return gi(e,t,n,arguments)}};var bt;Pe=function e(){bt||rr(),bt||(Pe=e)};function rr(){function e(){if(!bt&&(bt=!0,i.calledRun=!0,!bn)){if(i.noFSInit||$n||($n=!0,Qn(),i.stdin=i.stdin,i.stdout=i.stdout,i.stderr=i.stderr,i.stdin?Be("stdin",i.stdin):Pt("/dev/tty","/dev/stdin"),i.stdout?Be("stdout",null,i.stdout):Pt("/dev/tty","/dev/stdout"),i.stderr?Be("stderr",null,i.stderr):Pt("/dev/tty1","/dev/stderr"),Oe("/dev/stdin",0),Oe("/dev/stdout",1),Oe("/dev/stderr",1)),On=!1,zt(_n),i.onRuntimeInitialized&&i.onRuntimeInitialized(),i.postRun)for(typeof i.postRun=="function"&&(i.postRun=[i.postRun]);i.postRun.length;){var t=i.postRun.shift();kn.unshift(t)}zt(kn)}}if(!(0<ve)){if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;)ii();zt(vn),0<ve||(i.setStatus?(i.setStatus("Running..."),setTimeout(function(){setTimeout(function(){i.setStatus("")},1),e()},1)):e())}}if(i.preInit)for(typeof i.preInit=="function"&&(i.preInit=[i.preInit]);0<i.preInit.length;)i.preInit.pop()();return rr(),h}),vt)};typeof exports=="object"&&typeof Le=="object"?(Le.exports=Je,Le.exports.default=Je):typeof define=="function"&&define.amd?define([],function(){return Je}):typeof exports=="object"&&(exports.Module=Je);var Le;const Co=new URL(""+new URL("sql-wasm-18fc45ef.wasm",import.meta.url).href,self.location).toString();let Yt;async function Oo(){return Yt||(Yt=Je({locateFile:()=>Co})),await Yt}class ze{constructor(l){this.SQL=l}static _instance;static async getInstance(){return ze._instance||(ze._instance=new ze(await Oo())),ze._instance}hasTable(l,c){return l.exec('SELECT name FROM sqlite_master WHERE type="table"')[0].values.map(p=>p[0]).includes(c)}extractQmAndroidDbKeys(l){let c=null;try{return c=new this.SQL.Database(new Uint8Array(l)),this.hasTable(c,"audio_file_ekey_table")?c.exec("select file_path, ekey from `audio_file_ekey_table`")[0].values.map(([p,i])=>({name:ni(String(p)),ekey:String(i)})):null}finally{c?.close()}}}function _t(o,l=8){return"0x"+(o|0).toString(16).padStart(l,"0")}class it{constructor(l){this.view=l;const c=l.getUint32(0,!0);this.length=4+c,this.readInt()}offset=4;length;toString(){const l=_t(this.offset,8),c=_t(this.length,8);return`<MMKVParser offset=${l} len=${c}>`}get eof(){return this.offset>=this.length}readByte(){return this.view.getUint8(this.offset++)}readBigInt(){let l=0n,c=0n,h;do h=this.readByte(),l|=BigInt(h&127)<<c,c+=7n;while(h&128);return l}readInt(){const l=this.readBigInt();if(l>Number.MAX_SAFE_INTEGER)throw new Error("Runtime Error: BigInt too large to cast as number");return Number(l)}readBytes(l){const c=this.offset,h=c+l;return this.offset=h,new Uint8Array(this.view.buffer.slice(c,h))}readString(){const l=this.readInt(),c=this.readBytes(l);return nn(c).normalize()}readVariantString(){const l=this.readInt(),c=this.offset+l,h=this.readString();if(c!==this.offset){const p=_t(c),i=_t(this.offset);throw new Error(`readVariantString failed: offset does mismatch (expect: ${p}, actual: ${i})`)}return h}skipContainer(){const l=this.readInt();this.offset+=l}static toStringMap(l){const c=new it(l),h=new Map;for(;!c.eof;){const p=c.readString(),i=c.readVariantString();h.set(p,i)}return h}static parseKuwoEKey(l){const c=new it(l),h=[];for(;!c.eof;){const i=c.readString().match(/^sec_ekey#(\d+)-(.+)/);if(!i){c.skipContainer();continue}const[b,w,j]=i,O=c.readVariantString();h.push({rid:w,quality:j,ekey:O})}return h}}const zo=""+new URL("iosAllowBackup-5be73a8d.webp",import.meta.url).href;function on({children:o}){return r.jsx(g,{as:"pre",whiteSpace:"pre-wrap",wordBreak:"break-all",children:r.jsx(K,{children:o})})}const Ro="0011wjLv1bIkvv",xr="333407709-0011wjLv1bIkvv-1.mgalaxy",Xt="Q0M00011wjLv1bIkvv.mflac";function br({jailbreak:o}){const l=o,c=!o,h=o?"/var/mobile/Containers/Data/Application/<随机>/":"/AppDomain-";return r.jsxs(r.Fragment,{children:[r.jsx(te,{as:"h3",size:"md",children:"获取密钥数据库文件"}),r.jsxs(Re,{children:[c&&r.jsxs(T,{children:[r.jsx(g,{children:"首先需要在 iOS 客户端的设定允许备份："}),r.jsx(Sr,{src:zo})]}),c&&r.jsx(T,{children:r.jsx(g,{children:"使用你喜欢的备份软件对 iOS 设备进行完整备份；"})}),r.jsxs(T,{children:[c&&r.jsx(g,{children:"打开备份文件，并导航到下述目录："}),l&&r.jsx(g,{children:"访问下述目录："}),r.jsxs(on,{children:[h,"com.tencent.QQMusic/Documents/mmkv/"]})]}),r.jsx(T,{children:r.jsxs(g,{children:["提取或导出密钥数据库文件 ",r.jsx(K,{children:"filenameEkeyMap"}),"；"]})}),r.jsx(T,{children:r.jsxs(g,{children:["提交导出的 ",r.jsx(K,{children:"filenameEkeyMap"})," 文件；"]})}),r.jsx(T,{children:r.jsx(g,{children:"按下「保存」来应用更改。"})})]}),r.jsx(te,{as:"h3",size:"md",mt:"3",children:"获取离线文件"}),r.jsxs(N,{children:[r.jsx(g,{children:"访问下述目录："}),r.jsxs(on,{children:[h,"com.tencent.QQMusic/Library/Application Support/com.tencent.QQMusic/iData/iMusic"]}),r.jsxs(g,{children:["该目录又存在数个子目录，其子目录下保存的「",r.jsx(K,{children:"[字符].m[字符]"}),"」文件则是最终的加密文件。"]}),r.jsxs(g,{children:["格式：",r.jsx(K,{children:"[song_id]-[mid]-[随机数字].m[后缀]"})]}),r.jsxs(g,{children:["　例：",r.jsx(K,{children:xr})]})]}),r.jsx(te,{as:"h3",size:"md",mt:"3",children:"解密离线文件"}),r.jsx(g,{children:"勾选设定界面的「使用近似文件名匹配」可跳过该节内容。"}),r.jsx(g,{children:"⚠ 注意：若密钥过多，匹配过程可能会造成浏览器卡顿或无响应。"}),r.jsxs(Re,{children:[r.jsx(T,{children:r.jsxs(g,{children:["提取文件的 ",r.jsx(K,{children:"[mid]"})," 部分，如 ",r.jsx(K,{children:Ro}),"；"]})}),r.jsx(T,{children:r.jsxs(g,{children:["查找密钥表，得到文件名「",r.jsx(K,{children:Xt}),"」；"]})}),r.jsx(T,{children:r.jsxs(g,{children:["将文件更名为对应的文件名，如",r.jsx(K,{display:"inline",children:xr})," ➔",r.jsx(K,{display:"inline",children:Xt}),"；"]})}),r.jsx(T,{children:r.jsxs(g,{children:["回到主界面，提交文件「",r.jsx(K,{children:Xt}),"」。"]})})]})]})}function Lo(){return r.jsxs(r.Fragment,{children:[r.jsxs(N,{children:[r.jsx(g,{children:"iOS 设备获取应用私有文件比较麻烦，你需要越狱或使用一台 PC 或 Mac 来对 iOS 设备进行完整备份。"}),r.jsx(g,{children:"因此，建议换用 PC 或 Mac 重新下载音乐文件然后再尝试解密。"})]}),r.jsxs(Cr,{allowToggle:!0,mt:"2",children:[r.jsxs(Ze,{children:[r.jsx(te,{as:"h3",size:"md",children:r.jsxs(et,{children:[r.jsx(N,{as:"span",flex:"1",textAlign:"left",children:"我的 iOS 设备已经越狱"}),r.jsx(tt,{})]})}),r.jsx(nt,{pb:4,children:r.jsx(br,{jailbreak:!0})})]}),r.jsxs(Ze,{children:[r.jsx(te,{as:"h3",size:"md",children:r.jsxs(et,{children:[r.jsx(N,{as:"span",flex:"1",textAlign:"left",children:"我的 iOS 设备没有越狱"}),r.jsx(tt,{})]})}),r.jsx(nt,{pb:4,children:r.jsx(br,{jailbreak:!1})})]})]})]})}function To(o){return X({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M3.5 2A1.5 1.5 0 0 1 5 3.5V5H3.5a1.5 1.5 0 1 1 0-3zM6 5V3.5A2.5 2.5 0 1 0 3.5 6H5v4H3.5A2.5 2.5 0 1 0 6 12.5V11h4v1.5a2.5 2.5 0 1 0 2.5-2.5H11V6h1.5A2.5 2.5 0 1 0 10 3.5V5H6zm4 1v4H6V6h4zm1-1V3.5A1.5 1.5 0 1 1 12.5 5H11zm0 6h1.5a1.5 1.5 0 1 1-1.5 1.5V11zm-6 0v1.5A1.5 1.5 0 1 1 3.5 11H5z"}}]})(o)}function Do(o){return X({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M7.27 2.047a1 1 0 0 1 1.46 0l6.345 6.77c.6.638.146 1.683-.73 1.683H11.5v3a1 1 0 0 1-1 1h-5a1 1 0 0 1-1-1v-3H1.654C.78 10.5.326 9.455.924 8.816L7.27 2.047zM14.346 9.5 8 2.731 1.654 9.5H4.5a1 1 0 0 1 1 1v3h5v-3a1 1 0 0 1 1-1h2.846z"}}]})(o)}function Ho(){return r.jsxs("ruby",{children:[r.jsx(cn,{children:r.jsx(W,{as:To})}),r.jsx("rp",{children:" ("}),r.jsx("rt",{children:"command"}),r.jsx("rp",{children:")"})]})}function Po(){return r.jsxs("ruby",{children:[r.jsx(cn,{children:r.jsx(W,{as:Do})}),r.jsx("rp",{children:" ("}),r.jsx("rt",{children:"shift"}),r.jsx("rp",{children:")"})]})}function Fo(){return r.jsxs(r.Fragment,{children:[r.jsx(g,{children:"Mac 客户端使用 mmkv 数据库储存密钥。"}),r.jsx(g,{children:"该密钥文件通常存储在下述路径："}),r.jsx(on,{children:"~/Library/Containers/com.tencent.QQMusicMac/Data/Library/Application Support/QQMusicMac/mmkv/MMKVStreamEncryptId"}),r.jsx(te,{as:"h3",size:"md",mt:"4",children:"导入密钥"}),r.jsxs(Re,{children:[r.jsx(T,{children:r.jsxs(g,{children:["选中并复制上述的 ",r.jsx(K,{children:"MMKVStreamEncryptId"})," 文件路径"]})}),r.jsx(T,{children:r.jsx(g,{children:"点击上方的「文件选择区域」，打开「文件选择框」"})}),r.jsx(T,{children:r.jsxs(g,{children:["按下「",r.jsx(Po,{})," + ",r.jsx(Ho,{})," + ",r.jsx(cn,{children:"G"}),"」组合键打开「路径输入框」"]})}),r.jsx(T,{children:r.jsxs(g,{children:["粘贴之前复制的 ",r.jsx(K,{children:"MMKVStreamEncryptId"})," 文件路径"]})}),r.jsx(T,{children:r.jsx(g,{children:"按下「回车键」确认。"})})]})]})}function Ko(){return r.jsx(r.Fragment,{children:r.jsx(g,{children:"使用 Windows 客户端下载的文件不需要导入密钥。"})})}const wr={hljs:{display:"block",overflowX:"auto",padding:"0.5em",color:"#333",background:"#f8f8f8"},"hljs-comment":{color:"#998",fontStyle:"italic"},"hljs-quote":{color:"#998",fontStyle:"italic"},"hljs-keyword":{color:"#333",fontWeight:"bold"},"hljs-selector-tag":{color:"#333",fontWeight:"bold"},"hljs-subst":{color:"#333",fontWeight:"normal"},"hljs-number":{color:"#008080"},"hljs-literal":{color:"#008080"},"hljs-variable":{color:"#008080"},"hljs-template-variable":{color:"#008080"},"hljs-tag .hljs-attr":{color:"#008080"},"hljs-string":{color:"#d14"},"hljs-doctag":{color:"#d14"},"hljs-title":{color:"#900",fontWeight:"bold"},"hljs-section":{color:"#900",fontWeight:"bold"},"hljs-selector-id":{color:"#900",fontWeight:"bold"},"hljs-type":{color:"#458",fontWeight:"bold"},"hljs-class .hljs-title":{color:"#458",fontWeight:"bold"},"hljs-tag":{color:"#000080",fontWeight:"normal"},"hljs-name":{color:"#000080",fontWeight:"normal"},"hljs-attribute":{color:"#000080",fontWeight:"normal"},"hljs-regexp":{color:"#009926"},"hljs-link":{color:"#009926"},"hljs-symbol":{color:"#990073"},"hljs-bullet":{color:"#990073"},"hljs-built_in":{color:"#0086b3"},"hljs-builtin-name":{color:"#0086b3"},"hljs-meta":{color:"#999",fontWeight:"bold"},"hljs-deletion":{background:"#fdd"},"hljs-addition":{background:"#dfd"},"hljs-emphasis":{fontStyle:"italic"},"hljs-strong":{fontWeight:"bold"}},No=`try {
	$gz_b64 = adb shell su -c "cat '{{ dir }}/{{ file }}' | gzip | base64" | Out-String
	$bStream = New-Object System.IO.MemoryStream(,[System.Convert]::FromBase64String($gz_b64))
	$decoded = New-Object System.IO.Compression.GzipStream($bStream, [System.IO.Compression.CompressionMode]::Decompress)
	$outFile = New-Object System.IO.FileStream("{{ file }}", [System.IO.FileMode]::Create, [System.IO.FileAccess]::Write)
	$decoded.CopyTo($outFile)
} finally {
	if ($outFile -ne $null) { $outFile.Dispose() }
	if ($decoded -ne $null) { $decoded.Dispose() }
	if ($bStream -ne $null) { $bStream.Dispose() }
}
`,Bo=`sh adb shell su -c "cat '{{ dir }}/{{ file }}' | gzip | base64" \\
    | base64 -d | gzip -d '{{ file }}'
`,jr=(o,l)=>o.replace(/\{\{\s*(\w+)\s*\}\}/g,(c,h)=>Object.hasOwn(l,h)?String(l[h]):"<nil>");function ri({dir:o,file:l}){const c=jr(No,{dir:o,file:l}),h=jr(Bo,{dir:o,file:l});return r.jsxs(r.Fragment,{children:[r.jsxs(g,{children:["你需要 ",r.jsx("code",{children:"root"})," 访问权限来访问安卓应用的私有数据。"]}),r.jsxs(g,{children:["⚠️ 请注意，获取 ",r.jsx("code",{children:"root"})," 通常意味着你的安卓设备",r.jsx(Te.span,{color:"red.400",children:"将失去保修资格"}),"。"]}),r.jsxs(Cr,{allowToggle:!0,mt:"2",children:[r.jsxs(Ze,{children:[r.jsx(te,{as:"h3",size:"md",children:r.jsxs(et,{children:[r.jsx(N,{as:"span",flex:"1",textAlign:"left",children:"在安卓手机端操作"}),r.jsx(tt,{})]})}),r.jsx(nt,{pb:4,children:r.jsxs(Re,{children:[r.jsx(T,{children:r.jsxs(g,{children:["启动具有 ",r.jsx(K,{children:"root"})," 特权的文件浏览器"]})}),r.jsx(T,{children:r.jsxs(g,{children:["访问 ",r.jsxs(K,{children:[o,"/"]})," 目录。"]})}),r.jsx(T,{children:r.jsxs(g,{children:["将文件 ",r.jsx(K,{children:l})," 复制到浏览器可访问的目录。",r.jsx("br",{}),"（例如下载目录）"]})}),r.jsx(T,{children:r.jsx(g,{children:"提交该数据库文件。"})})]})})]}),r.jsxs(Ze,{children:[r.jsx(te,{as:"h3",size:"md",children:r.jsxs(et,{children:[r.jsx(N,{as:"span",flex:"1",textAlign:"left",children:"在 PC 端操作（ADB / PowerShell）"}),r.jsx(tt,{})]})}),r.jsx(nt,{pb:4,children:r.jsxs(Re,{children:[r.jsxs(T,{children:[r.jsxs(g,{children:["确保 ",r.jsx("code",{children:"adb"})," 命令可用。"]}),r.jsxs(g,{children:["💡 如果没有，可以",r.jsxs(Ye,{href:"https://scoop.sh/#/apps?q=adb",isExternal:!0,children:["使用 Scoop 安装 ",r.jsx(bs,{})]}),"。"]})]}),r.jsx(T,{children:r.jsx(g,{children:"启动终端并进入 PowerShell 7 环境。"})}),r.jsx(T,{children:r.jsx(g,{children:"将安卓设备连接到电脑，并允许调试。"})}),r.jsxs(T,{children:[r.jsx(g,{children:"粘贴执行下述代码。若设备提示「超级用户请求」请允许："}),r.jsx(St,{language:"ps1",style:wr,children:c})]}),r.jsx(T,{children:r.jsxs(g,{children:["提交当前目录下的 ",r.jsx(K,{children:l})," 文件。"]})})]})})]}),r.jsxs(Ze,{children:[r.jsx(te,{as:"h3",size:"md",children:r.jsxs(et,{children:[r.jsx(N,{as:"span",flex:"1",textAlign:"left",children:"在 Linux / Mac 系统下操作（ADB / Shell）"}),r.jsx(tt,{})]})}),r.jsx(nt,{pb:4,children:r.jsxs(Re,{children:[r.jsx(T,{children:r.jsx(g,{children:"将安卓设备连接到电脑，并允许调试。"})}),r.jsxs(T,{children:[r.jsx(g,{children:"粘贴执行下述代码。若设备提示「超级用户请求」请允许："}),r.jsx(St,{language:"bash",style:wr,children:h})]}),r.jsx(T,{children:r.jsxs(g,{children:["提交当前目录下的 ",r.jsx(K,{children:l})," 文件。"]})})]})})]})]})]})}function Uo(){const o=Or(),l=fn(),{keys:c,allowFuzzyNameSearch:h}=mn(Gs),[p,i]=se.useState(!1),b=()=>l(yo()),w=()=>l(bo()),j=A=>{l(jo({enable:A.target.checked}))},O=async A=>{try{const E=await A.arrayBuffer();let L=null;if(/[_.]db$/i.test(A.name)){if(L=(await ze.getInstance()).extractQmAndroidDbKeys(E),!L){alert(`不是支持的 SQLite 数据库文件。
表名：${L}`);return}}else if(/MMKVStreamEncryptId|filenameEkeyMap/i.test(A.name)){const Q=await A.arrayBuffer(),be=it.toStringMap(new DataView(Q));L=Array.from(be.entries(),([Ae,Ee])=>({name:ni(Ae),ekey:Ee}))}L?(l(wo(L)),i(!1),o({title:`导入成功 (${L.length})`,description:"记得保存更改来应用。",isClosable:!0,duration:5e3,status:"success"})):alert(`不支持的文件：${A.name}`)}catch(E){console.error("error during import: ",E),alert(`导入数据库时发生错误：${E}`)}};return r.jsxs(ee,{minH:0,flexDir:"column",flex:1,children:[r.jsx(te,{as:"h2",size:"lg",children:"QMCv2 密钥"}),r.jsx(g,{children:"QQ 音乐目前采用的加密方案（QMCv2）。在使用「QQ 音乐」安卓、Mac 或 iOS 客户端的情况下，其「离线加密文件」对应的「密钥」储存在独立的数据库文件内。"}),r.jsxs(Me,{pb:2,pt:2,children:[r.jsxs(zr,{isAttached:!0,colorScheme:"purple",variant:"outline",children:[r.jsx(xe,{onClick:b,leftIcon:r.jsx(W,{as:Ur}),children:"添加一条密钥"}),r.jsxs(un,{children:[r.jsx(dn,{as:st,icon:r.jsx(pn,{})}),r.jsxs(hn,{children:[r.jsx(rt,{onClick:()=>i(!0),icon:r.jsx(W,{as:Wr,boxSize:5}),children:"从文件导入密钥"}),r.jsx(Rr,{}),r.jsx(rt,{color:"red",onClick:w,icon:r.jsx(W,{as:Kr,boxSize:5}),children:"清空密钥"})]})]})]}),r.jsxs(Me,{children:[r.jsx(rs,{isChecked:h,onChange:j,children:r.jsx(g,{children:"匹配相似文件名"})}),r.jsx(Lr,{hasArrow:!0,closeOnClick:!1,label:r.jsxs(N,{children:[r.jsx(g,{children:"若文件名匹配失败，则使用相似文件名的密钥。"}),r.jsxs(g,{children:["使用「",r.jsxs("ruby",{children:["莱文斯坦距离",r.jsx("rp",{children:" ("}),r.jsx("rt",{children:"Levenshtein distance"}),r.jsx("rp",{children:")"})]}),"」算法计算相似程度。"]}),r.jsx(g,{children:"若密钥数量过多，匹配时可能会造成浏览器卡顿或无响应一段时间。"})]}),children:r.jsx(Fr,{})})]})]}),r.jsxs(N,{flex:1,minH:0,overflow:"auto",pr:"4",children:[r.jsx(Tr,{spacing:3,children:c.map(({id:A,ekey:E,name:L},Q)=>r.jsx(Io,{id:A,ekey:E,name:L,i:Q},A))}),c.length===0&&r.jsx(g,{children:"还没有添加密钥。"})]}),r.jsxs(ti,{clientName:"QQ 音乐",show:p,onClose:()=>i(!1),onImport:O,children:[r.jsxs(Mt,{children:[r.jsx(ce,{children:"安卓"}),r.jsx(ce,{children:"iOS"}),r.jsx(ce,{children:"Mac"}),r.jsx(ce,{children:"Windows"})]}),r.jsxs(qt,{flex:1,overflow:"auto",children:[r.jsx(ue,{children:r.jsx(ri,{dir:"/data/data/com.tencent.qqmusic/databases",file:"player_process_db"})}),r.jsx(ue,{children:r.jsx(Lo,{})}),r.jsx(ue,{children:r.jsx(Fo,{})}),r.jsx(ue,{children:r.jsx(Ko,{})})]})]})]})}const Wo=se.memo(({id:o,ekey:l,quality:c,rid:h,i:p})=>{const i=ot(),b=(j,O)=>i(_o({id:o,field:j,value:O.target.value})),w=()=>i(ko({id:o}));return r.jsx(T,{mt:0,pt:2,pb:2,_even:{bg:"gray.50"},children:r.jsxs(Me,{children:[r.jsx(g,{w:"2em",textAlign:"center",children:p+1}),r.jsxs(qe,{flex:1,children:[r.jsxs(Me,{flex:1,w:"full",children:[r.jsx(Xe,{variant:"flushed",placeholder:"资源 ID",value:h,onChange:j=>b("rid",j),type:"number",maxW:"8em"}),r.jsx(Xe,{variant:"flushed",placeholder:"音质格式",value:c,onChange:j=>b("quality",j),flex:1})]}),r.jsxs(Ar,{size:"xs",children:[r.jsx(Er,{pr:"2",children:r.jsx(W,{as:Br})}),r.jsx(Xe,{variant:"flushed",placeholder:"密钥",value:l,onChange:j=>b("ekey",j)}),r.jsx(Ir,{children:r.jsx(g,{pl:"2",color:l.length?"green.500":"red.500",children:r.jsx("code",{children:l.length||"?"})})})]})]}),r.jsx(st,{"aria-label":"删除该密钥",icon:r.jsx(W,{as:Nr,boxSize:6}),variant:"ghost",colorScheme:"red",type:"button",onClick:w})]})})});function Go(){return r.jsx(r.Fragment,{children:r.jsx(g,{children:"使用 Windows 客户端下载的文件不需要导入密钥。"})})}function Vo(){const o=Or(),l=fn(),c=mn(Qs),[h,p]=se.useState(!1),i=()=>l(vo()),b=()=>l(So()),w=async j=>{let O=null;if(/cn\.kuwo\.player\.mmkv/i.test(j.name)){const A=await j.arrayBuffer();O=it.parseKuwoEKey(new DataView(A))}O?(l(Mo(O)),p(!1),o({title:`导入完成，共导入了 ${O.length} 个密钥。`,description:"记得按下「保存」来应用。",isClosable:!0,status:"success"})):o({title:`不支持的文件：${j.name}`,isClosable:!0,status:"error"})};return r.jsxs(ee,{minH:0,flexDir:"column",flex:1,children:[r.jsx(te,{as:"h2",size:"lg",children:"酷我解密密钥（KwmV2）"}),r.jsxs(g,{children:["酷我安卓版本的「臻品音质」已经换用 V2 版，后缀名为 ",r.jsx(K,{children:"mflac"})," 或沿用旧的 ",r.jsx(K,{children:"kwm"}),"。","","该格式需要提取密钥后才能正常解密。"]}),r.jsx(Me,{pb:2,pt:2,children:r.jsxs(zr,{isAttached:!0,colorScheme:"purple",variant:"outline",children:[r.jsx(xe,{onClick:i,leftIcon:r.jsx(W,{as:Ur}),children:"添加一条密钥"}),r.jsxs(un,{children:[r.jsx(dn,{as:st,icon:r.jsx(pn,{})}),r.jsxs(hn,{children:[r.jsx(rt,{onClick:()=>p(!0),icon:r.jsx(W,{as:Wr,boxSize:5}),children:"从文件导入密钥"}),r.jsx(Rr,{}),r.jsx(rt,{color:"red",onClick:b,icon:r.jsx(W,{as:Kr,boxSize:5}),children:"清空密钥"})]})]})]})}),r.jsxs(N,{flex:1,minH:0,overflow:"auto",pr:"4",children:[r.jsx(Tr,{spacing:3,children:c.map(({id:j,ekey:O,quality:A,rid:E},L)=>r.jsx(Wo,{id:j,ekey:O,quality:A,rid:E,i:L},j))}),c.length===0&&r.jsx(g,{children:"还没有添加密钥。"})]}),r.jsxs(ti,{clientName:"酷我音乐",show:h,onClose:()=>p(!1),onImport:w,children:[r.jsxs(Mt,{children:[r.jsx(ce,{children:"安卓"}),r.jsx(ce,{children:"Windows"})]}),r.jsxs(qt,{flex:1,overflow:"auto",children:[r.jsx(ue,{children:r.jsx(ri,{dir:"/data/data/cn.kuwo.player/files/mmkv",file:"cn.kuwo.player.mmkv.defaultconfig"})}),r.jsx(ue,{children:r.jsx(Go,{})})]})]})]})}const kt=[{name:"QMCv2 密钥",Tab:Uo},{name:"KWMv2 密钥",Tab:Vo},{name:"其它／待定",Tab:()=>r.jsx(g,{children:"这里空空如也～"})}];function Qo(){const o=ot(),l=Dr({base:!1,lg:!0})??!1,[c,h]=se.useState(0),p=w=>{h(w)},i=()=>o(Ao()),b=()=>o(qo());return r.jsxs(ee,{flexDir:"column",flex:1,children:[r.jsxs(un,{children:[r.jsx(dn,{as:xe,leftIcon:r.jsx(qs,{}),rightIcon:r.jsx(pn,{}),colorScheme:"gray",variant:"outline",w:"full",flexShrink:0,hidden:l,mb:"4",children:kt[c].name}),r.jsx(is,{children:r.jsx(hn,{w:"100px",children:kt.map(({name:w},j)=>r.jsx(rt,{onClick:()=>h(j),children:w},w))})})]}),r.jsxs(ln,{orientation:l?"vertical":"horizontal",align:"start",variant:"line-i",display:"flex",flex:1,index:c,onChange:p,children:[r.jsx(Mt,{hidden:!l,minW:"8em",width:"8em",textAlign:"right",justifyContent:"center",children:kt.map(({name:w})=>r.jsx(ce,{children:w},w))}),r.jsx(qt,{children:kt.map(({name:w,Tab:j})=>r.jsxs(ee,{as:ue,flex:1,flexDir:"column",h:"100%",children:[r.jsx(ee,{h:"100%",flex:1,minH:0,children:r.jsx(j,{})}),r.jsx(qe,{mt:"4",alignItems:"flex-start",w:"full",children:r.jsxs(ee,{flexDir:"row",gap:"2",w:"full",children:[r.jsx(an,{children:r.jsx(N,{color:"gray",children:"设置会在保存后生效。"})}),r.jsx(ss,{}),r.jsxs(Me,{gap:"2",justifyContent:"flex-end",children:[r.jsx(st,{icon:r.jsx(W,{as:As}),onClick:i,colorScheme:"red",variant:"ghost",title:"放弃未储存的更改，将设定还原为储存前的状态。","aria-label":"放弃未储存的更改"}),r.jsx(xe,{onClick:b,children:"保存"})]})]})})]},w))})]})]})}function $o(){const o=Dr({base:{p:"0"},lg:{p:void 0}});return r.jsx(os,{as:ee,maxW:"container.lg",...o,children:r.jsx(Qo,{})})}function R(o,l={}){let c=!1;function h(){if(!c){c=!0;return}throw new Error("[anatomy] .part(...) should only be called once. Did you mean to use .extend(...) ?")}function p(...A){h();for(const E of A)l[E]=j(E);return R(o,l)}function i(...A){for(const E of A)E in l||(l[E]=j(E));return R(o,l)}function b(){return Object.fromEntries(Object.entries(l).map(([E,L])=>[E,L.selector]))}function w(){return Object.fromEntries(Object.entries(l).map(([E,L])=>[E,L.className]))}function j(A){const Q=`chakra-${(["container","root"].includes(A??"")?[o]:[o,A]).filter(Boolean).join("__")}`;return{className:Q,selector:`.${Q}`,toString:()=>A}}return{parts:p,toPart:j,extend:i,selectors:b,classnames:w,get keys(){return Object.keys(l)},__type:{}}}R("accordion").parts("root","container","button","panel").extend("icon");R("alert").parts("title","description","container").extend("icon","spinner");R("avatar").parts("label","badge","container").extend("excessLabel","group");R("breadcrumb").parts("link","item","container").extend("separator");R("button").parts();R("checkbox").parts("control","icon","container").extend("label");R("progress").parts("track","filledTrack").extend("label");R("drawer").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer");R("editable").parts("preview","input","textarea");R("form").parts("container","requiredIndicator","helperText");R("formError").parts("text","icon");R("input").parts("addon","field","element");R("list").parts("container","item","icon");R("menu").parts("button","list","item").extend("groupTitle","command","divider");R("modal").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer");R("numberinput").parts("root","field","stepperGroup","stepper");R("pininput").parts("field");R("popover").parts("content","header","body","footer").extend("popper","arrow","closeButton");R("progress").parts("label","filledTrack","track");R("radio").parts("container","control","label");R("select").parts("field","icon");R("slider").parts("container","track","thumb","filledTrack","mark");R("stat").parts("container","label","helpText","number","icon");R("switch").parts("container","track","thumb");R("table").parts("table","thead","tbody","tr","th","td","tfoot","caption");var Jo=R("tabs").parts("root","tab","tablist","tabpanel","tabpanels","indicator");R("tag").parts("container","label","closeButton");R("card").parts("container","header","body","footer");const Zt=Hr("tabs-color"),en=Hr("tabs-bg"),{definePartsStyle:Yo,defineMultiStyleConfig:Xo}=as(Jo.keys),Zo=Yo(o=>{const{colorScheme:l,orientation:c}=o,h=c==="vertical",p=h?"borderEnd":"borderTop",i=h?"marginEnd":"marginTop";return{tablist:{[p]:"2px solid",borderColor:"inherit"},tabpanels:{flex:1,minH:0},tabpanel:{padding:0},tab:{[p]:"2px solid",borderColor:"transparent",[i]:"-2px",justifyContent:"flex-end",_selected:{[Zt.variable]:`colors.${l}.600`,_dark:{[Zt.variable]:`colors.${l}.300`},borderColor:"currentColor"},_active:{[en.variable]:"colors.gray.200",_dark:{[en.variable]:"colors.whiteAlpha.300"}},_disabled:{_active:{bg:"none"}},color:Zt.reference,bg:en.reference},root:{display:"flex",flexDir:h?"row":"column",gap:8,minH:0}}}),ea=Xo({baseStyle:{tablist:{userSelect:"none"},tabpanel:{minHeight:0,overflow:"auto",maxHeight:"100%"}},variants:{"line-i":Zo}}),ta=ls({fonts:{body:["-system-ui,-apple-system,BlinkMacSystemFont","Source Han Sans CN,Noto Sans CJK SC","Segoe UI,Helvetica,Arial,sans-serif","Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol"].join(",")},components:{Button:{baseStyle:{fontWeight:"normal"},defaultProps:{colorScheme:"teal"}},Tabs:ea,Link:{baseStyle:{color:"blue.600"}}},styles:{global:{"#root":{minHeight:"100vh",maxHeight:"100vh",display:"flex",flexDirection:"column"}}},sizes:{footer:{container:"5rem",content:"4rem"}}}),$e=(...o)=>{},na={log:$e,info:$e,warn:$e,debug:$e,trace:$e};function vr(){return{}.ENABLE_PERF_LOG==="1"?window.console:na}const ra="um-react-settings";function ia(o){return vs(gn.getInitialState().production,l=>{if(o?.qmc2){const{allowFuzzyNameSearch:c,keys:h}=o.qmc2;for(const[p,i]of mr(h))typeof i=="string"&&(l.qmc2.keys[p]=i);typeof c=="boolean"&&(l.qmc2.allowFuzzyNameSearch=c)}if(o?.kwm2){const{keys:c}=o.kwm2;for(const[h,p]of mr(c))typeof p=="string"&&Jr(h)&&(l.kwm2.keys[h]=p)}})}function sa(o,l=ra){let c;try{const h=JSON.parse(localStorage.getItem(l)??"");if(h){const p=ia(h);o.dispatch(po(p)),vr().debug("settings loaded")}}catch{}return o.subscribe(js({delay:150},()=>{const h=o.getState().settings.production;c!==h&&(c=h,localStorage.setItem(l,JSON.stringify(h)),vr().debug("settings saved"))}))}const oa=fs({fileListing:no,settings:Eo}),aa=o=>ms({reducer:oa,preloadedState:o}),la=async()=>Qr.request(yn.VERSION,null);function ca(){const o=ps(la,[]);return r.jsx(ee,{as:"span",pl:"1",alignItems:"center","data-testid":"sdk-version",children:r.jsx(Lr,{hasArrow:!0,placement:"top",label:r.jsxs(qe,{children:[r.jsx(g,{children:"App: 0.2.0-e904aa4"}),r.jsxs(g,{children:["SDK: ",o]})]}),bg:"gray.300",color:"black",children:r.jsx(Fr,{})})})}const ua=30*60*1e3,_r=()=>new Date().getFullYear();function da(){const[o,l]=se.useState(_r);return se.useEffect(()=>{const c=()=>l(_r);c();const h=setInterval(c,ua);return()=>{clearInterval(h)}},[]),r.jsx(r.Fragment,{children:o})}function ha(){return r.jsxs(an,{fontSize:"sm",textAlign:"center",bottom:"0",w:"full",pt:"3",pb:"3",borderTop:"1px solid",borderColor:"gray.300",bg:"gray.100",color:"gray.800",flexDir:"column",flexShrink:0,children:[r.jsxs(ee,{as:g,children:[r.jsx(Ye,{href:"https://git.unlock-music.dev/um/um-react",isExternal:!0,children:"音乐解锁"})," (0.2.0",r.jsx(se.Suspense,{children:r.jsx(ca,{})}),") - 移除已购音乐的加密保护。"]}),r.jsxs(g,{children:["© 2019 - ",r.jsx(da,{})," ",r.jsx(Ye,{href:"https://git.unlock-music.dev/um",isExternal:!0,children:"UnlockMusic 团队"})," | ",r.jsx(Ye,{href:"https://git.unlock-music.dev/um/um-react/src/branch/main/LICENSE",isExternal:!0,children:"使用 MIT 授权协议"})]})]})}const kr=aa();function fa(){return se.useEffect(()=>sa(kr),[]),r.jsx(cs,{theme:ta,children:r.jsxs(ys,{store:kr,children:[r.jsxs(ln,{flex:1,minH:0,display:"flex",flexDir:"column",children:[r.jsxs(Mt,{justifyContent:"center",children:[r.jsxs(ce,{children:[r.jsx(W,{as:Ss,mr:"1"}),r.jsx(Te.span,{children:"应用"})]}),r.jsxs(ce,{children:[r.jsx(W,{as:Ms,mr:"1"}),r.jsx(Te.span,{children:"设置"})]})]}),r.jsxs(qt,{overflow:"auto",minW:0,flexDir:"column",flex:1,display:"flex",children:[r.jsx(ue,{children:r.jsx(fo,{})}),r.jsx(ue,{flex:1,display:"flex",children:r.jsx($o,{})})]})]}),r.jsx(ha,{})]})})}St.registerLanguage("ps1",_s);St.registerLanguage("bash",ks);tn.createRoot(document.getElementById("root")).render(r.jsx(gs.StrictMode,{children:r.jsx(fa,{})}));
